<style>
    .align-center-h {
        text-align: center;
    }

    .cursor-pointer {
        cursor: pointer;
    }

    .sorting-list:hover {
        cursor: grab;
    }

    .sorting-list .selected {
        background-color: #dff0d8;
        color: #3c763d;
    }

    .dndDisabled {
        cursor: not-allowed;
        background-color: rgba(128, 128, 128, 0.765) !important;
    }

    div[dnd-list] {
        min-height: 50px;
    }

    div[dnd-list] .dndDraggingSource {
        display: none;
    }

    div[dnd-list] .dndPlaceholder {
        background-color: #ddd;
        /* min-height: 40px; */
        list-style-type: none;
        margin-bottom: 2%;
    }
</style>
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card cst-card">
                <div class="card-title">
                    <div class="float-left">
                        <h4 class="text">{{ctrl.medplatFormMasterDto.formName}}</h4>
                    </div>
                    <div class="pull-right">
                        <button type="submit" class="btn btn-primary" ng-click="ctrl.save()">
                            <em class="fa fa-floppy-o"></em> Save</button>
                        <button class="btn btn-secondary" ng-click="ctrl.goBack()">Back</button>
                    </div>
                </div>
                <div class="card-body inline-form">
                    <form name="ctrl.manageWebDynamicTemplate" id="manageWebDynamicTemplate" novalidate>
                        <div class="row mb-15">
                            <div class="col-12">
                                <div class="float-right">
                                    <button class="btn btn-warning" ng-click="ctrl.configureCss()">
                                        Configure CSS
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-2" id="component">
                                <div style="position: sticky; top:80px">
                                    <div class="cst-table table-responsive">
                                        <table aria-describedby="table"
                                            class="table table-sm table-striped filter-table table-fixed table-bordered header-fixed">
                                            <colgroup>
                                                <col style="width:20%;">
                                                <col style="width:80%;">
                                            </colgroup>
                                            <thead class="cst-thead">
                                                <tr>
                                                    <th colspan="3" class="align-center-h">Web Components</th>
                                                </tr>
                                                <tr>
                                                    <th>Sr.<br>No.</th>
                                                    <th>Name</th>
                                                </tr>
                                            </thead>
                                            <tbody class="cst-tbody">
                                                <tr ng-repeat="component in ctrl.webComponents"
                                                    dnd-draggable="component">
                                                    <td ng-bind="$index + 1"></td>
                                                    <td ng-bind="component.type | emptylabel"></td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <hr>
                                    <div class="cst-table table-responsive">
                                        <table aria-describedby="table"
                                            class="table table-sm table-striped filter-table table-bordered header-fixed">
                                            <colgroup>
                                                <col style="width:20%;">
                                                <col style="width:80%;">
                                            </colgroup>
                                            <thead class="cst-thead">
                                                <tr>
                                                    <th colspan="2" class="align-center-h">Fields</th>
                                                </tr>
                                                <tr>
                                                    <th>Sr.<br>No.</th>
                                                    <th>Name</th>
                                                </tr>
                                            </thead>
                                            <tbody class="cst-tbody">
                                                <tr ng-repeat="field in ctrl.fields" dnd-draggable="field"
                                                    dnd-copied="ctrl.fieldAdded(field)" dnd-effect-allowed="copy"
                                                    dnd-disable-if="field.isAdded"
                                                    ng-class="field.isAdded ? 'dndDisabled' : ''">
                                                    <td ng-bind="$index + 1"></td>
                                                    <td
                                                        ng-bind="field.config.fieldName + ' | ' + field.config.fieldType">
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <div class="col-10 sorting-list drop-zone"
                                style="border-left: 1px solid #9a9898; display: inline-block;"
                                dnd-list="ctrl.webTemplateConfig" dnd-drop="ctrl.onDrop(item)">
                                <div ng-repeat="(elementIndex, element) in ctrl.webTemplateConfig"
                                    dnd-draggable="element" dnd-effect-allowed="move"
                                    dnd-moved="ctrl.webTemplateConfig.splice($index, 1)"
                                    ng-class="{selected: ctrl.selected === element}">
                                    <configure-element-template-directive sibling-elements="ctrl.webTemplateConfig"
                                        element-index="elementIndex" element="element"
                                        form-field-list="ctrl.formFieldList" fields="ctrl.fields"
                                        array-objects="ctrl.arrayObjects"
                                        check-for-form-field="ctrl.checkForFormField(elements)"
                                        on-child-web-component-changed="ctrl.onChildWebComponentChanged(childWebComponent,elements, element, parentComponentType)">
                                    </configure-element-template-directive>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer mt-5">
                            <div class="float-right">
                                <button type="submit" class="btn btn-primary" ng-click="ctrl.save()">
                                    <em class="fa fa-floppy-o"></em> Save</button>
                                <button class="btn btn-secondary" ng-click="ctrl.goBack()">Back</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>