<div class="container-fluid">
    <div class="row">
        <div class="col-12 mb-15">
            <div class="pull-right">
                <button class="btn btn-primary m-1"
                    ng-if="['manage-form-configs', 'manage-standard-field-configs'].includes(ctrl.selectedTab)"
                    ng-click="ctrl.navigateToAdd()">
                    Add
                </button>
            </div>
            <div class="cst-tab">
                <uib-tabset active='ctrl.selectedTab'>
                    <!-- Manage Form Configs tab -->
                    <uib-tab heading="Form Configs" index="'manage-form-configs'"
                        ng-click="ctrl.getSystemConstraintForms()">
                        <div class="no-data-placeholder"
                            ng-if="!ctrl.systemConstraintForms || ctrl.systemConstraintForms.length === 0">
                            <h5>No Record Found!</h5>
                        </div>
                        <div class="cst-table table-responsive table-set-height-less" id="label-scroll"
                            ng-if="ctrl.systemConstraintForms.length">
                            <table aria-describedby="table"
                                class="table table-sm table-striped table-bordered header-fixed">
                                <thead class="cst-thead">
                                    <tr>
                                        <th>Sr. No.</th>
                                        <th>Form Name</th>
                                        <th>Form Code</th>
                                        <th>Description</th>
                                        <th>Last Modified By</th>
                                        <th>Last Modified On</th>
                                        <th>Current Version</th>
                                        <th>State</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody class="cst-tbody">
                                    <tr ng-repeat="form in ctrl.systemConstraintForms">
                                        <td ng-bind="$index + 1"></td>
                                        <td ng-bind="form.formName | emptylabel"></td>
                                        <td ng-bind="form.formCode | emptylabel"></td>
                                        <td width="35%" ng-bind="form.description | emptylabel"></td>
                                        <td ng-bind-html="form.user | emptylabel"></td>
                                        <td ng-bind="form.modified_on | date:'dd/MM/yyyy' | emptylabel"></td>
                                        <td>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div>
                                                    <h5>
                                                        <span class="badge badge-pill" ng-class="{'badge-warning':form.currentVersion==='DRAFT', 'badge-success':form.currentVersion!=='DRAFT'}">{{form.currentVersion | emptylabel}}</span>
                                                    </h5>
                                                </div>
                                                <div class="action-cell" ng-if="ctrl.canChangeStableVersion">
                                                    <ul class="action-item" style="cursor: pointer;">
                                                        <li class="dropdown-toggle" id="moreDropdown"
                                                            data-toggle="dropdown" aria-haspopup="true"
                                                            aria-expanded="false" title="Change Current Version">
                                                            <a class="fa fa-2x fa-edit"></a>
                                                            <ul class="dropdown-menu dropdown-menu-right more-action-dropdown"
                                                                aria-labelledby="moreDropdown" x-placement="bottom-end"
                                                                style="max-height: 150px; overflow-y: scroll;">
                                                                <li ng-click="ctrl.changeFormVersion(form, version)"
                                                                    ng-repeat="version in form.availableVersion">
                                                                    <a>{{version}}</a>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </td>
                                        <td>
                                            <h5>
                                                <span class="badge" ng-class="{'badge-warning':form.state==='INACTIVE', 'badge-success':form.state==='ACTIVE'}">{{form.state | statecapitalize | emptylabel}}</span>
                                            </h5>
                                        </td>
                                        <td class="action-cell">
                                            <ul class="action-item">
                                                <li ng-click="ctrl.navigateToEdit(form.uuid)" title="Edit Form Config">
                                                    <a class="action-icon edit-icon"></a>
                                                </li>
                                                <li class="dropdown-toggle" id="moreDropdown" data-toggle="dropdown"
                                                    aria-haspopup="true" aria-expanded="false">
                                                    <a class="action-icon more-icon"></a>
                                                    <ul class="dropdown-menu dropdown-menu-right more-action-dropdown"
                                                        aria-labelledby="moreDropdown" x-placement="bottom-end">
                                                        <li ng-click="ctrl.navigateToEditDynamicTemplate(form.uuid)">
                                                            <a>Configure Form Layout <em class="fa fa-cogs" style="pointer-events: none;"></em></a>
                                                        </li>
                                                        <li ng-click="ctrl.downloadFlyway(form, 'stable')">
                                                            <a>Download Form Flyway <em class="fa fa-cloud-download" style="pointer-events: none;"></em></a>
                                                        </li>
                                                        <li ng-click="ctrl.resetDraft(form)">
                                                            <a>Reset Draft Version <em class="fa fa-refresh" style="pointer-events: none;"></em></a>
                                                        </li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </uib-tab>
                </uib-tabset>
            </div>
        </div>
    </div>
</div>