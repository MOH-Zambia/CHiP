with insert_into_medplat_form_master as (
	INSERT INTO medplat_form_master
	("uuid", form_name, form_code, current_version, state, created_by, created_on, modified_by, modified_on, menu_config_id)
	SELECT 
		'5e151974-4662-408f-9d8f-045560b9801e',
		'CHIP_GBV_SCREENING',
		'CHIP_GBV_SCREENING',
		'1',
		'ACTIVE',
		97104,
		now(),
		97104,
		now(),
		393
	ON CONFLICT (form_code)
	DO UPDATE 
	SET
		uuid=EXCLUDED."uuid",
		form_name=EXCLUDED.form_name,
		current_version=cast(cast(coalesce((select max(cast(medplat_form_version_history.version as integer)) from medplat_form_master inner join medplat_form_version_history on medplat_form_master.uuid  = medplat_form_version_history.form_master_uuid where medplat_form_master.form_code = EXCLUDED.form_code and medplat_form_version_history.version <> 'DRAFT'),'0') as integer) + 1 as text),
		state=EXCLUDED.state,
		created_by=EXCLUDED.created_by, 
		created_on=EXCLUDED.created_on, 
		modified_by=EXCLUDED.modified_by, 
		modified_on=EXCLUDED.modified_on, 
		menu_config_id=EXCLUDED.menu_config_id
	returning medplat_form_master.current_version
)
INSERT INTO medplat_form_version_history
("uuid", form_master_uuid, template_config, field_config, "version", created_by, created_on, modified_by, modified_on, form_object, template_css, form_vm, execution_sequence, query_config)
SELECT
	'729fb45a-0710-01ea-d1c9-b7796db25740',
	'5e151974-4662-408f-9d8f-045560b9801e',
	'[{"type":"CARD","config":{"title":null,"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unique_health_id","fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status","fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp","fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]},{"type":"CARD","config":{"title":null,"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"service_date","fieldName":"Service date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"client_response","fieldName":"Did client report case?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"health_infra","fieldName":"Client will be referred to the following health infrastructure.","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"health_infra","fieldName":"Select Health Infrastructure","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"further_treatment","fieldName":"Does client need further treatment","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"threatened_with_violence_past_12_months","fieldName":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"forced_sex_past_12_months","fieldName":"In the past 12 month, have you been forced to have sex against your will?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"physically_forced_pregnancy_past_12_months","fieldName":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"forced_pregnancy_loss_past","fieldName":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"case_date","fieldName":"Case Date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"severe_case","fieldName":"Is case severe?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gbv_type","fieldName":"Type of GBV","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"difficulty_type","fieldName":"Difficulty if any","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"physically_hurt_past_12_months","fieldName":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"forced_sex_for_essentials_past_12_months","fieldName":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"pregnant_due_to_force","fieldName":"If yes, are you currently pregnant because of that?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"coerced_or_forced_marriage_past_12_months","fieldName":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]}]',
	'{"CHIP_GBV_SCREENING":{"Age":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Age"},"DOB":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"DOB"},"Gender":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Gender"},"Religion":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Religion"},"Case Date":{"label":"Case Date","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Case Date","fieldKey":"case_date","isHidden":"false","fieldName":"Case Date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter date","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minCaseDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Choose date"},"Memeber ID":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"unique_health_id","fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member ID"},"NRC Number":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"NRC Number"},"HIV Display":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"hiv_status","fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"HIV status"},"Member Name":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member Name"},"Type of GBV":{"label":"Type of GBV","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Type of GBV","fieldKey":"gbv_type","isHidden":"false","fieldName":"Type of GBV","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"true","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.severe_case===true\"}]}}","optionsType":"listValueField","placeholder":"--select--","staticOptions":null,"listValueField":"gbvTypeList","requiredMessage":"Choose","additionalStaticOptionsRequired":"false"},"Service date":{"label":"Service Date","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Service date","fieldKey":"service_date","isHidden":"false","fieldName":"Service date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Service date","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minServiceDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Please enter service date"},"Marital Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Marital Status"},"Is case severe?":{"label":"Is case severe?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Is case severe?","fieldKey":"severe_case","isHidden":"false","fieldName":"Is case severe?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.client_response===true\"}]}}","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"Chronic Diseases":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Chronic Diseases"},"Difficulty if any":{"label":"Difficulty if any","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Difficulty if any","fieldKey":"difficulty_type","isHidden":"false","fieldName":"Difficulty if any","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.severe_case===true\"}]}}","optionsType":"staticOptions","placeholder":"--select--","staticOptions":"[{\"key\":\"NONE\",\"value\":\"No Difficulty\"},{\"key\":\"MILD\",\"value\":\"Mild Difficulty\"},{\"key\":\"MODERATE\",\"value\":\"Moderate Difficulty\"},{\"key\":\"SEVERE\",\"value\":\"Severe Difficulty\"},{\"key\":\"UNABLE\",\"value\":\"Unable To Carry Out The Activity\"},{\"key\":\"NOTSPECIFIED\",\"value\":\"Not Specified/not Applicable.\"}]","requiredMessage":"Choose from below","additionalStaticOptionsRequired":"false"},"Did client report case?":{"label":"Did client report case?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Did client report case?","fieldKey":"client_response","isHidden":"false","fieldName":"Did client report case?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"Last method of contraception":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"9\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","displayValue":"Last method of contraception"},"Select Health Infrastructure":{"label":"Select Health Infrastructure","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Select Health Infrastructure","fieldKey":"health_infra","isHidden":"false","fieldName":"Select Health Infrastructure","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.name===null\"}]}}","optionsType":"variableList","placeholder":"--select--","variableList":"$utilityData$.healthInfraList","staticOptions":null,"requiredMessage":"Choose","additionalStaticOptionsRequired":"false"},"LMP (Last Menstrual Period) date":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"lmp","fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"16\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''F''\"}]}}","displayType":"text","displayValue":"LMP (Last Menstrual Period) date"},"Does client need further treatment":{"label":"Does client need further treatment","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Does client need further treatment","fieldKey":"further_treatment","isHidden":"false","fieldName":"Does client need further treatment","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"If yes, are you currently pregnant because of that?":{"label":"If yes, are you currently pregnant because of that?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"If yes, are you currently pregnant because of that?","fieldKey":"pregnant_due_to_force","isHidden":"false","fieldName":"If yes, are you currently pregnant because of that?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.physically_forced_pregnancy_past_12_months===true\"}]}}","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"Client will be referred to the following health infrastructure.":{"events":"null","ngModel":"$formData$.gbvDetails","fieldKey":"name","fieldName":"Client will be referred to the following health infrastructure.","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.health_infra!==null\"}]}}","displayType":"text","displayValue":"Client will be referred to the following health infrastructure."},"In the past 12 month, has anyone ever forced you to lose a pregnancy?":{"label":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","fieldKey":"forced_pregnancy_loss_past","isHidden":"false","fieldName":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, have you been forced to have sex against your will?":{"label":"In the past 12 month, have you been forced to have sex against your will?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, have you been forced to have sex against your will?","fieldKey":"forced_sex_past_12_months","isHidden":"false","fieldName":"In the past 12 month, have you been forced to have sex against your will?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?":{"label":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","fieldKey":"coerced_or_forced_marriage_past_12_months","isHidden":"false","fieldName":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?":{"label":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","fieldKey":"physically_forced_pregnancy_past_12_months","isHidden":"false","fieldName":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''F''\"}]}}","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?":{"label":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","fieldKey":"threatened_with_violence_past_12_months","isHidden":"false","fieldName":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?":{"label":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","fieldKey":"physically_hurt_past_12_months","isHidden":"false","fieldName":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?":{"label":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","fieldKey":"forced_sex_for_essentials_past_12_months","isHidden":"false","fieldName":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"}}}',
	current_version,
	97104,
	now(),
	97104,
	now(),
	'[{"title":"$formData$","isArray":false,"nodes":[{"title":"gbvDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:659","path":"$formData$.gbvDetails","backendConfigPath":"$formData$.gbvDetails"}],"path":"$formData$","backendConfigPath":"$formData$","$$hashKey":"object:348"},{"title":"$infoData$","isArray":false,"nodes":[{"title":"memberDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:364","path":"$infoData$.memberDetails","backendConfigPath":"$infoData$.memberDetails"}],"path":"$infoData$","backendConfigPath":"$infoData$","$$hashKey":"object:349"}]',
	null,
	'{"formVariables":[{"value":"ageInYears","type":"NUMBER","bindTo":"$utilityData$","setter":true,"setterMethodName":"setAgeInYears","setterMethodCode":"(function setAgeInYears() {\n\n\t\n\tlet ageParts = $infoData$.memberDetails.age.split('' '');\n    let years = isNaN(parseInt(ageParts[0])) ? 0 : parseInt(ageParts[0]);\n    $utilityData$.ageInYears = years;\n    console.log($utilityData$.ageInYears)\n\t\n\t\n});"},{"value":"minServiceDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinServiceDate","setterMethodCode":"(function setMinServiceDate() {\n$utilityData$.minServiceDate = $formData$.gbvDetails.service_date ? moment($formData$.gbvDetails.service_date) : moment().subtract(9, ''months'');\n});"},{"value":"minCaseDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinCaseDate","setterMethodCode":"(function setMinCaseDate() {\n\n    let serviceDate = $formData$.gbvDetails.service_date ? moment($formData$.gbvDetails.service_date) : moment();\n\n    // Set minCaseDate to be greater than or equal to the service date\n    $utilityData$.case_date = moment.max(serviceDate, moment());\n\t\n});"},{"value":"healthInfraList","type":"ARRAY","bindTo":"$utilityData$","setter":true,"setterMethodName":"setHealthInfraList","setterMethodCode":"(function setHealthInfraList() {\n\n\t/**\n\t* Setter method for $utilityData$.healthInfraList (ARRAY)\n\t* Please see example below on how to set the value\n\t* $utilityData$.healthInfraList = xxx;\n\t* You can use the available parameters\n\t*/\n\t\n});"}],"formMethods":[{"value":"setMultipleValuesInDropDown","code":"(function setMultipleValuesInDropDown() {\n\tif ($formData$.gbvDetails.gbv_type) {\n        $formData$.gbvDetails.gbv_type = $formData$.gbvDetails.gbv_type.split('','').map(gbv => parseInt(gbv));\n    }\n});"}],"formQueries":[{"value":"Get Member Details","queryCode":"get_member_details","params":"member_id","paramConfig":"{\"member_id\":\"$stateParams$.id\"}","query":"select im.unique_health_id,concat_ws('' '', im.first_name,im.middle_name,im.last_name) as member_name,im.dob,im.gender,lfvd.value as marital_status,im.religion,im.nrc_number,cast(age(current_date, im.dob) as text) as age,im.lmp,im.last_method_of_contraception,cast(im.additional_info as json)->> ''hivTest'' as hiv_status,cast(im.additional_info as json)->> ''lastServiceLongDate'' as service_date,\nim.chronic_disease from imt_member im inner join listvalue_field_value_detail lfvd on im.marital_status=lfvd.id inner join imt_family imf on im.family_id=imf.family_id where im.id=#member_id#;","response":"$infoData$.memberDetails","isResultArray":false,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":false,"isPagination":false,"toVariable":false},{"value":"Get Gbv Details","queryCode":"get_gbv_details","params":"id","paramConfig":"{\"id\":\"$stateParams$.id\"}","query":"select member_id,\n    gvm.service_date,\n    gvm.case_date,\n    gvm.client_response,\n    gvm.severe_case,\n    gvm.gbv_type,\n    gvm.difficulty_type,\n    gvm.further_treatment,\n    gvm.threatened_with_violence_past_12_months,\n    gvm.physically_hurt_past_12_months,\n    gvm.forced_sex_past_12_months,\n    gvm.forced_sex_for_essentials_past_12_months,\n    gvm.physically_forced_pregnancy_past_12_months,\n    gvm.pregnant_due_to_force,\n    gvm.forced_pregnancy_loss_past,\n    gvm.coerced_or_forced_marriage_past_12_months,\n    gvm.health_infra,\n    hid.name\n    from gbv_visit_master gvm left join health_infrastructure_details hid on CAST(gvm.health_infra AS int)=hid.id where gvm.member_id = cast(#id# as text);","response":"$formData$.gbvDetails","isResultArray":null,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":null,"isPagination":false},{"value":"Get health infra","queryCode":"get_health_infra","params":"","paramConfig":"{}","query":"select  h.name , h.id,h.type as type from health_infrastructure_details h;","response":"$utilityData$.healthInfraList","isResultArray":true,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":true,"isPagination":false,"dropdownKey":"id","dropdownValue":"name","toVariable":true}]}',
	'[{"type":"FORM_QUERY","value":"Get Member Details"},{"type":"FORM_QUERY","value":"Get Gbv Details"},{"type":"FORM_QUERY","value":"Get health infra"},{"type":"FORM_VARIABLE_SETTER","value":"ageInYears"},{"type":"FORM_VARIABLE_SETTER","value":"minServiceDate"},{"type":"FORM_VARIABLE_SETTER","value":"minCaseDate"},{"type":"FORM_VARIABLE_SETTER","value":"healthInfraList"},{"type":"FORM_METHOD","value":"setMultipleValuesInDropDown"}]',
	'[{"queryCode":"update_gbv_details","hasLoop":null,"queryPath":"$formData$.gbvDetails","subQueries":[],"params":[{"key":"service_date","type":"FIELD","valueKey":"service_date"},{"key":"case_date","type":"FIELD","valueKey":"case_date"},{"key":"client_response","type":"FIELD","valueKey":"client_response"},{"key":"severe_case","type":"FIELD","valueKey":"severe_case"},{"key":"gbv_type","type":"FIELD","valueKey":"gbv_type"},{"key":"difficulty_type","type":"FIELD","valueKey":"difficulty_type"},{"key":"further_treatment","type":"FIELD","valueKey":"further_treatment"},{"key":"threatened_with_violence_past_12_months","type":"FIELD","valueKey":"threatened_with_violence_past_12_months"},{"key":"physically_hurt_past_12_months","type":"FIELD","valueKey":"physically_hurt_past_12_months"},{"key":"forced_sex_past_12_months","type":"FIELD","valueKey":"forced_sex_past_12_months"},{"key":"forced_sex_for_essentials_past_12_months","type":"FIELD","valueKey":"forced_sex_for_essentials_past_12_months"},{"key":"physically_forced_pregnancy_past_12_months","type":"FIELD","valueKey":"physically_forced_pregnancy_past_12_months"},{"key":"pregnant_due_to_force","type":"FIELD","valueKey":"pregnant_due_to_force"},{"key":"forced_pregnancy_loss_past","type":"FIELD","valueKey":"forced_pregnancy_loss_past"},{"key":"coerced_or_forced_marriage_past_12_months","type":"FIELD","valueKey":"coerced_or_forced_marriage_past_12_months"},{"key":"health_infra","type":"FIELD","valueKey":"health_infra"},{"key":"member_id","type":"META_DATA","valueKey":"$formData$.gbvDetails.member_id"}],"isEventResource":null,"$$hashKey":"object:562","queryName":"Update Gbv Details","query":"with updated_data as (\nupdate gbv_visit_master set \nservice_date=#service_date#,\n    case_date=#case_date#,\n    client_response=#client_response#,\n    severe_case=#severe_case#,\n    gbv_type=#gbv_type#,\n    difficulty_type=#difficulty_type#,\n    further_treatment=#further_treatment#,\n    threatened_with_violence_past_12_months=#threatened_with_violence_past_12_months#,\n    physically_hurt_past_12_months=#physically_hurt_past_12_months#,\n    forced_sex_past_12_months=#forced_sex_past_12_months#,\n    forced_sex_for_essentials_past_12_months=#forced_sex_for_essentials_past_12_months#,\n    physically_forced_pregnancy_past_12_months=#physically_forced_pregnancy_past_12_months#,\n    pregnant_due_to_force=#pregnant_due_to_force#,\n    forced_pregnancy_loss_past=#forced_pregnancy_loss_past#,\n    coerced_or_forced_marriage_past_12_months=#coerced_or_forced_marriage_past_12_months#,\n    health_infra=#health_infra#,\n     modified_by = #loggedInUserId#,\n     modified_on = now()\n    where member_id=#member_id#\n    returning gbv_visit_master.id\n)\nselect id from updated_data;"}]'
FROM insert_into_medplat_form_master;


INSERT INTO medplat_form_version_history
("uuid", form_master_uuid, template_config, field_config, "version", created_by, created_on, modified_by, modified_on, form_object, template_css, form_vm, execution_sequence, query_config)
SELECT
	'ee5bfbfe-fdde-21ed-0b95-037f63d404e0',
	'5e151974-4662-408f-9d8f-045560b9801e',
	'[{"type":"CARD","config":{"title":null,"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unique_health_id","fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status","fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp","fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]},{"type":"CARD","config":{"title":null,"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"service_date","fieldName":"Service date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"client_response","fieldName":"Did client report case?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"health_infra","fieldName":"Client will be referred to the following health infrastructure.","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"health_infra","fieldName":"Select Health Infrastructure","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"further_treatment","fieldName":"Does client need further treatment","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"threatened_with_violence_past_12_months","fieldName":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"forced_sex_past_12_months","fieldName":"In the past 12 month, have you been forced to have sex against your will?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"physically_forced_pregnancy_past_12_months","fieldName":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"forced_pregnancy_loss_past","fieldName":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"case_date","fieldName":"Case Date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"severe_case","fieldName":"Is case severe?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gbv_type","fieldName":"Type of GBV","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"difficulty_type","fieldName":"Difficulty if any","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"physically_hurt_past_12_months","fieldName":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"forced_sex_for_essentials_past_12_months","fieldName":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"pregnant_due_to_force","fieldName":"If yes, are you currently pregnant because of that?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"coerced_or_forced_marriage_past_12_months","fieldName":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]}]',
	'{"CHIP_GBV_SCREENING":{"Age":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Age"},"DOB":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"DOB"},"Gender":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Gender"},"Religion":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Religion"},"Case Date":{"label":"Case Date","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Case Date","fieldKey":"case_date","isHidden":"false","fieldName":"Case Date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter date","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minCaseDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Choose date"},"Memeber ID":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"unique_health_id","fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member ID"},"NRC Number":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"NRC Number"},"HIV Display":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"hiv_status","fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"HIV status"},"Member Name":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member Name"},"Type of GBV":{"label":"Type of GBV","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Type of GBV","fieldKey":"gbv_type","isHidden":"false","fieldName":"Type of GBV","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"true","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.severe_case===true\"}]}}","optionsType":"listValueField","placeholder":"--select--","staticOptions":null,"listValueField":"gbvTypeList","requiredMessage":"Choose","additionalStaticOptionsRequired":"false"},"Service date":{"label":"Service Date","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Service date","fieldKey":"service_date","isHidden":"false","fieldName":"Service date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Service date","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minServiceDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Please enter service date"},"Marital Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Marital Status"},"Is case severe?":{"label":"Is case severe?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Is case severe?","fieldKey":"severe_case","isHidden":"false","fieldName":"Is case severe?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.client_response===true\"}]}}","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"Chronic Diseases":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Chronic Diseases"},"Difficulty if any":{"label":"Difficulty if any","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Difficulty if any","fieldKey":"difficulty_type","isHidden":"false","fieldName":"Difficulty if any","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.severe_case===true\"}]}}","optionsType":"staticOptions","placeholder":"--select--","staticOptions":"[{\"key\":\"NONE\",\"value\":\"No Difficulty\"},{\"key\":\"MILD\",\"value\":\"Mild Difficulty\"},{\"key\":\"MODERATE\",\"value\":\"Moderate Difficulty\"},{\"key\":\"SEVERE\",\"value\":\"Severe Difficulty\"},{\"key\":\"UNABLE\",\"value\":\"Unable To Carry Out The Activity\"},{\"key\":\"NOTSPECIFIED\",\"value\":\"Not Specified/not Applicable.\"}]","requiredMessage":"Choose from below","additionalStaticOptionsRequired":"false"},"Did client report case?":{"label":"Did client report case?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Did client report case?","fieldKey":"client_response","isHidden":"false","fieldName":"Did client report case?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"Last method of contraception":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"9\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","displayValue":"Last method of contraception"},"Select Health Infrastructure":{"label":"Select Health Infrastructure","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Select Health Infrastructure","fieldKey":"health_infra","isHidden":"false","fieldName":"Select Health Infrastructure","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.name===null\"}]}}","optionsType":"variableList","placeholder":"--select--","variableList":"$utilityData$.healthInfraList","staticOptions":null,"requiredMessage":"Choose","additionalStaticOptionsRequired":"false"},"LMP (Last Menstrual Period) date":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"lmp","fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"16\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''F''\"}]}}","displayType":"text","displayValue":"LMP (Last Menstrual Period) date"},"Does client need further treatment":{"label":"Does client need further treatment","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"Does client need further treatment","fieldKey":"further_treatment","isHidden":"false","fieldName":"Does client need further treatment","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"If yes, are you currently pregnant because of that?":{"label":"If yes, are you currently pregnant because of that?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"If yes, are you currently pregnant because of that?","fieldKey":"pregnant_due_to_force","isHidden":"false","fieldName":"If yes, are you currently pregnant because of that?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.physically_forced_pregnancy_past_12_months===true\"}]}}","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"Client will be referred to the following health infrastructure.":{"events":"null","ngModel":"$formData$.gbvDetails","fieldKey":"name","fieldName":"Client will be referred to the following health infrastructure.","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.gbvDetails.health_infra!==null\"}]}}","displayType":"text","displayValue":"Client will be referred to the following health infrastructure."},"In the past 12 month, has anyone ever forced you to lose a pregnancy?":{"label":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","fieldKey":"forced_pregnancy_loss_past","isHidden":"false","fieldName":"In the past 12 month, has anyone ever forced you to lose a pregnancy?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, have you been forced to have sex against your will?":{"label":"In the past 12 month, have you been forced to have sex against your will?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, have you been forced to have sex against your will?","fieldKey":"forced_sex_past_12_months","isHidden":"false","fieldName":"In the past 12 month, have you been forced to have sex against your will?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?":{"label":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","fieldKey":"coerced_or_forced_marriage_past_12_months","isHidden":"false","fieldName":"In the past 12 month, were you coerced or forced into marriage (or to partner with someone)?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?":{"label":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","fieldKey":"physically_forced_pregnancy_past_12_months","isHidden":"false","fieldName":"In the past 12 month, were you ever physically forced or made to feel that you had to become pregnant against your will?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''F''\"}]}}","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?":{"label":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","fieldKey":"threatened_with_violence_past_12_months","isHidden":"false","fieldName":"In the past 12 month, have you been threatened with physical or sexual violence by someone in your home or outside of your home?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?":{"label":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","fieldKey":"physically_hurt_past_12_months","isHidden":"false","fieldName":"In the past 12 month, have you been hit, punched, kicked, slapped, choked, hurt with a weapon, or otherwise physically hurt by someone in your house or outside of your house?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"},"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?":{"label":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","events":"null","ngModel":"$formData$.gbvDetails","tooltip":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","fieldKey":"forced_sex_for_essentials_past_12_months","isHidden":"false","fieldName":"In the past 12 month, were you ever forced to have sex to be able to eat, have shelter, or have sex for essential services [such as protection or school] because you or someone in your family would be in physical danger if you refused?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no"}}}',
	'DRAFT',
	97104,
	now(),
	97104,
	now(),
	'[{"title":"$formData$","isArray":false,"nodes":[{"title":"gbvDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:659","path":"$formData$.gbvDetails","backendConfigPath":"$formData$.gbvDetails"}],"path":"$formData$","backendConfigPath":"$formData$","$$hashKey":"object:348"},{"title":"$infoData$","isArray":false,"nodes":[{"title":"memberDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:364","path":"$infoData$.memberDetails","backendConfigPath":"$infoData$.memberDetails"}],"path":"$infoData$","backendConfigPath":"$infoData$","$$hashKey":"object:349"}]',
	null,
	'{"formVariables":[{"value":"ageInYears","type":"NUMBER","bindTo":"$utilityData$","setter":true,"setterMethodName":"setAgeInYears","setterMethodCode":"(function setAgeInYears() {\n\n\t\n\tlet ageParts = $infoData$.memberDetails.age.split('' '');\n    let years = isNaN(parseInt(ageParts[0])) ? 0 : parseInt(ageParts[0]);\n    $utilityData$.ageInYears = years;\n    console.log($utilityData$.ageInYears)\n\t\n\t\n});"},{"value":"minServiceDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinServiceDate","setterMethodCode":"(function setMinServiceDate() {\n$utilityData$.minServiceDate = $formData$.gbvDetails.service_date ? moment($formData$.gbvDetails.service_date) : moment().subtract(9, ''months'');\n});"},{"value":"minCaseDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinCaseDate","setterMethodCode":"(function setMinCaseDate() {\n\n    let serviceDate = $formData$.gbvDetails.service_date ? moment($formData$.gbvDetails.service_date) : moment();\n\n    // Set minCaseDate to be greater than or equal to the service date\n    $utilityData$.case_date = moment.max(serviceDate, moment());\n\t\n});"},{"value":"healthInfraList","type":"ARRAY","bindTo":"$utilityData$","setter":true,"setterMethodName":"setHealthInfraList","setterMethodCode":"(function setHealthInfraList() {\n\n\t/**\n\t* Setter method for $utilityData$.healthInfraList (ARRAY)\n\t* Please see example below on how to set the value\n\t* $utilityData$.healthInfraList = xxx;\n\t* You can use the available parameters\n\t*/\n\t\n});"}],"formMethods":[{"value":"setMultipleValuesInDropDown","code":"(function setMultipleValuesInDropDown() {\n\tif ($formData$.gbvDetails.gbv_type) {\n        $formData$.gbvDetails.gbv_type = $formData$.gbvDetails.gbv_type.split('','').map(gbv => parseInt(gbv));\n    }\n});"}],"formQueries":[{"value":"Get Member Details","queryCode":"get_member_details","params":"member_id","paramConfig":"{\"member_id\":\"$stateParams$.id\"}","query":"select im.unique_health_id,concat_ws('' '', im.first_name,im.middle_name,im.last_name) as member_name,im.dob,im.gender,lfvd.value as marital_status,im.religion,im.nrc_number,cast(age(current_date, im.dob) as text) as age,im.lmp,im.last_method_of_contraception,cast(im.additional_info as json)->> ''hivTest'' as hiv_status,cast(im.additional_info as json)->> ''lastServiceLongDate'' as service_date,\nim.chronic_disease from imt_member im inner join listvalue_field_value_detail lfvd on im.marital_status=lfvd.id inner join imt_family imf on im.family_id=imf.family_id where im.id=#member_id#;","response":"$infoData$.memberDetails","isResultArray":false,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":false,"isPagination":false,"toVariable":false},{"value":"Get Gbv Details","queryCode":"get_gbv_details","params":"id","paramConfig":"{\"id\":\"$stateParams$.id\"}","query":"select member_id,\n    gvm.service_date,\n    gvm.case_date,\n    gvm.client_response,\n    gvm.severe_case,\n    gvm.gbv_type,\n    gvm.difficulty_type,\n    gvm.further_treatment,\n    gvm.threatened_with_violence_past_12_months,\n    gvm.physically_hurt_past_12_months,\n    gvm.forced_sex_past_12_months,\n    gvm.forced_sex_for_essentials_past_12_months,\n    gvm.physically_forced_pregnancy_past_12_months,\n    gvm.pregnant_due_to_force,\n    gvm.forced_pregnancy_loss_past,\n    gvm.coerced_or_forced_marriage_past_12_months,\n    gvm.health_infra,\n    hid.name\n    from gbv_visit_master gvm left join health_infrastructure_details hid on CAST(gvm.health_infra AS int)=hid.id where gvm.member_id = cast(#id# as text);","response":"$formData$.gbvDetails","isResultArray":null,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":null,"isPagination":false},{"value":"Get health infra","queryCode":"get_health_infra","params":"","paramConfig":"{}","query":"select  h.name , h.id,h.type as type from health_infrastructure_details h;","response":"$utilityData$.healthInfraList","isResultArray":true,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":true,"isPagination":false,"dropdownKey":"id","dropdownValue":"name","toVariable":true}]}',
	'[{"type":"FORM_QUERY","value":"Get Member Details"},{"type":"FORM_QUERY","value":"Get Gbv Details"},{"type":"FORM_QUERY","value":"Get health infra"},{"type":"FORM_VARIABLE_SETTER","value":"ageInYears"},{"type":"FORM_VARIABLE_SETTER","value":"minServiceDate"},{"type":"FORM_VARIABLE_SETTER","value":"minCaseDate"},{"type":"FORM_VARIABLE_SETTER","value":"healthInfraList"},{"type":"FORM_METHOD","value":"setMultipleValuesInDropDown"}]',
	'[{"queryCode":"update_gbv_details","hasLoop":null,"queryPath":"$formData$.gbvDetails","subQueries":[],"params":[{"key":"service_date","type":"FIELD","valueKey":"service_date"},{"key":"case_date","type":"FIELD","valueKey":"case_date"},{"key":"client_response","type":"FIELD","valueKey":"client_response"},{"key":"severe_case","type":"FIELD","valueKey":"severe_case"},{"key":"gbv_type","type":"FIELD","valueKey":"gbv_type"},{"key":"difficulty_type","type":"FIELD","valueKey":"difficulty_type"},{"key":"further_treatment","type":"FIELD","valueKey":"further_treatment"},{"key":"threatened_with_violence_past_12_months","type":"FIELD","valueKey":"threatened_with_violence_past_12_months"},{"key":"physically_hurt_past_12_months","type":"FIELD","valueKey":"physically_hurt_past_12_months"},{"key":"forced_sex_past_12_months","type":"FIELD","valueKey":"forced_sex_past_12_months"},{"key":"forced_sex_for_essentials_past_12_months","type":"FIELD","valueKey":"forced_sex_for_essentials_past_12_months"},{"key":"physically_forced_pregnancy_past_12_months","type":"FIELD","valueKey":"physically_forced_pregnancy_past_12_months"},{"key":"pregnant_due_to_force","type":"FIELD","valueKey":"pregnant_due_to_force"},{"key":"forced_pregnancy_loss_past","type":"FIELD","valueKey":"forced_pregnancy_loss_past"},{"key":"coerced_or_forced_marriage_past_12_months","type":"FIELD","valueKey":"coerced_or_forced_marriage_past_12_months"},{"key":"health_infra","type":"FIELD","valueKey":"health_infra"},{"key":"member_id","type":"META_DATA","valueKey":"$formData$.gbvDetails.member_id"}],"isEventResource":null,"$$hashKey":"object:562","queryName":"Update Gbv Details","query":"with updated_data as (\nupdate gbv_visit_master set \nservice_date=#service_date#,\n    case_date=#case_date#,\n    client_response=#client_response#,\n    severe_case=#severe_case#,\n    gbv_type=#gbv_type#,\n    difficulty_type=#difficulty_type#,\n    further_treatment=#further_treatment#,\n    threatened_with_violence_past_12_months=#threatened_with_violence_past_12_months#,\n    physically_hurt_past_12_months=#physically_hurt_past_12_months#,\n    forced_sex_past_12_months=#forced_sex_past_12_months#,\n    forced_sex_for_essentials_past_12_months=#forced_sex_for_essentials_past_12_months#,\n    physically_forced_pregnancy_past_12_months=#physically_forced_pregnancy_past_12_months#,\n    pregnant_due_to_force=#pregnant_due_to_force#,\n    forced_pregnancy_loss_past=#forced_pregnancy_loss_past#,\n    coerced_or_forced_marriage_past_12_months=#coerced_or_forced_marriage_past_12_months#,\n    health_infra=#health_infra#,\n     modified_by = #loggedInUserId#,\n     modified_on = now()\n    where member_id=#member_id#\n    returning gbv_visit_master.id\n)\nselect id from updated_data;"}]'
ON CONFLICT (form_master_uuid, "version")
DO UPDATE
SET
	form_master_uuid=EXCLUDED.form_master_uuid,
	template_config=EXCLUDED.template_config, 
	field_config=EXCLUDED.field_config, 
	"version"=EXCLUDED."version", 
	created_by=EXCLUDED.created_by,
	created_on=EXCLUDED.created_on,
	modified_by=EXCLUDED.modified_by,
	modified_on=EXCLUDED.modified_on,
	form_object=EXCLUDED.form_object,
	template_css=EXCLUDED.template_css,
	form_vm=EXCLUDED.form_vm,
	execution_sequence=EXCLUDED.execution_sequence,
	query_config=EXCLUDED.query_config;
