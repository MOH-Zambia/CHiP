with insert_into_medplat_form_master as (
	INSERT INTO medplat_form_master
	("uuid", form_name, form_code, current_version, state, created_by, created_on, modified_by, modified_on, menu_config_id)
	SELECT 
		'c57149f6-1bf2-437c-82ae-12a5d78d33ce',
		'Malaria Non Index',
		'MALARIA_NON_INDEX',
		'1',
		'ACTIVE',
		97104,
		now(),
		97104,
		now(),
		393
	ON CONFLICT (form_code)
	DO UPDATE 
	SET
		uuid=EXCLUDED."uuid",
		form_name=EXCLUDED.form_name,
		current_version=cast(cast(coalesce((select max(cast(medplat_form_version_history.version as integer)) from medplat_form_master inner join medplat_form_version_history on medplat_form_master.uuid  = medplat_form_version_history.form_master_uuid where medplat_form_master.form_code = EXCLUDED.form_code and medplat_form_version_history.version <> 'DRAFT'),'0') as integer) + 1 as text),
		state=EXCLUDED.state,
		created_by=EXCLUDED.created_by, 
		created_on=EXCLUDED.created_on, 
		modified_by=EXCLUDED.modified_by, 
		modified_on=EXCLUDED.modified_on, 
		menu_config_id=EXCLUDED.menu_config_id
	returning medplat_form_master.current_version
)
INSERT INTO medplat_form_version_history
("uuid", form_master_uuid, template_config, field_config, "version", created_by, created_on, modified_by, modified_on, form_object, template_css, form_vm, execution_sequence, query_config)
SELECT
	'a489a510-f8e9-4366-0a31-92f38c48ec29',
	'c57149f6-1bf2-437c-82ae-12a5d78d33ce',
	'[{"type":"CARD","config":{"title":"Member Details","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unique_health_id","fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status","fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp_date","fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]},{"type":"CARD","config":{"title":"Screening Details","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"service_date","fieldName":"Service date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"reason_for_no_consent","fieldName":"Select reason","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"individuals_living","fieldName":"Number of people living in the household","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"people_tested_in_household","fieldName":"People tested in house","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"sprayable_surface","fieldName":"Sprayable surfaces (Walls)","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"was_irs_conducted","fieldName":"IRS conducted","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"having_llin_in_house","fieldName":"Do you have LLIN’s in the house ?","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"took_dhap","fieldName":"DHAP","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"took_med_for_malaria_prevention","fieldName":"Have you taken medicene to prevent malaria infection in the past 30 days ?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"name","fieldName":"Assigned user health infrastructure","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"has_consent_sought","fieldName":"Consent","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"individuals_on_last_night","fieldName":"Individuals who spent night","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"people_rcd_positive","fieldName":"Tested positive during rcd","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"non_sprayable_surface","fieldName":"Non sprayable surfaces","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"date_of_last_spray","fieldName":"Date of last spray","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"number_of_llins_hanging","fieldName":"LLIN hanging","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"sleep_under_llin","fieldName":"Sleep under LLIN","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"received_any_other_prevention","fieldName":"Did you receive any other malaria preventive measures in the past 30 days ?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"other_preventive_measure","fieldName":"Please specify other preventive measure","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]}]',
	'{"MALARIA_NON_INDEX":{"Age":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"age","hasError":false,"showCard":true,"fieldName":"Age","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Age","errorMsgListKeys":[]},"DOB":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"dob","hasError":false,"showCard":true,"fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","dateFormat":"dd/MM/yyyy","disability":"null","requirable":"null","visibility":"null","displayType":"date","showContent":false,"displayValue":"DOB","errorMsgListKeys":[]},"DHAP":{"label":"Did you take DHAp in the past 30 days ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"DHAP","fieldKey":"took_dhap","hasError":false,"isHidden":"false","showCard":false,"fieldName":"DHAP","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Gender":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"gender","hasError":false,"showCard":true,"fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Gender","errorMsgListKeys":[]},"Consent":{"label":"Has consent been sought?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Consent","fieldKey":"has_consent_sought","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Consent","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Please select yes or no","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose","errorMsgListKeys":[]},"Religion":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"religion","hasError":false,"showCard":true,"fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Religion","errorMsgListKeys":[]},"Memeber ID":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"unique_health_id","hasError":false,"showCard":true,"fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Member ID","errorMsgListKeys":[]},"NRC Number":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"nrc_number","hasError":false,"showCard":true,"fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"NRC Number","errorMsgListKeys":[]},"HIV Display":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"hiv_status","hasError":false,"showCard":true,"fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"HIV status","errorMsgListKeys":[]},"Member Name":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"member_name","hasError":false,"showCard":true,"fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Member Name","errorMsgListKeys":[]},"LLIN hanging":{"max":"999","min":"0","label":"How many LLINs are hanging in the house ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"LLIN hanging","fieldKey":"number_of_llins_hanging","isHidden":"false","fieldName":"LLIN hanging","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.having_llin_in_house===''YES''\"}]}}","placeholder":"Enter number of LLIN","requiredMessage":"Only number"},"Service date":{"label":"Service Date","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Service date","fieldKey":"service_date","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Service date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Service date","showContent":false,"maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minServiceDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Please enter service date","errorMsgListKeys":[]},"IRS conducted":{"label":"Was IRS (Indoor Residual Spraying) conducted in that house in the past 12 months","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"IRS conducted","fieldKey":"was_irs_conducted","hasError":false,"isHidden":"false","showCard":false,"fieldName":"IRS conducted","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Select reason":{"label":"Select reason","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Select reason","fieldKey":"reason_for_no_consent","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Select reason","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.has_consent_sought===false\"}]}}","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"REFUSAL\",\"value\":\"Refusal\"},{\"key\":\"FOLLOW_UP_DONE_IN_PAST_MONTH\",\"value\":\"Follow up already done in the past one month\"},{\"key\":\"NO_HOUSEHOLD_MEMBER_FOUND\",\"value\":\"No household member found\"},{\"key\":\"BELOW_LEGAL_AGE\",\"value\":\"Household member are below the legal age of consent\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"Marital Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"marital_status","hasError":false,"showCard":true,"fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Marital Status","errorMsgListKeys":[]},"Chronic Diseases":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"chronic_disease","hasError":false,"showCard":true,"fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Chronic Diseases","errorMsgListKeys":[]},"Sleep under LLIN":{"label":"Did you sleep under LLIN last night ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Sleep under LLIN","fieldKey":"sleep_under_llin","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Sleep under LLIN","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Date of last spray":{"label":"Date of last spray","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Date of last spray","fieldKey":"date_of_last_spray","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Date of last spray","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.was_irs_conducted===true\"}]}}","placeholder":"Enter date","showContent":false,"maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minSprayDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Enter date","errorMsgListKeys":[]},"Non sprayable surfaces":{"label":"Non sprayable surfaces","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Non sprayable surfaces","fieldKey":"non_sprayable_surface","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Non sprayable surfaces","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"GRASS\",\"value\":\"Grass\"},{\"key\":\"GLASS\",\"value\":\"Glass\"},{\"key\":\"REEDS\",\"value\":\"Reeds\"},{\"key\":\"METAL\",\"value\":\"Metal\"},{\"key\":\"PLASTIC\",\"value\":\"Plastic\"},{\"key\":\"NON_APPLICABLE\",\"value\":\"Non-applicable\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"People tested in house":{"max":"999","min":"0","label":"Total number of people tested in the household","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"People tested in house","fieldKey":"people_tested_in_household","isHidden":"false","fieldName":"People tested in house","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter number of people tested","requiredMessage":"Only number"},"Sprayable surfaces (Walls)":{"label":"Sprayable surfaces (Walls)","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Sprayable surfaces (Walls)","fieldKey":"sprayable_surface","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Sprayable surfaces (Walls)","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"PLASTERED_AND_PAINTED\",\"value\":\"Plastered and painted\"},{\"key\":\"PLASTERED_NOT_PAINTED\",\"value\":\"Plastered not painted\"},{\"key\":\"BURNT_BRICKS\",\"value\":\"Burnt bricks\"},{\"key\":\"UNBURNT_BRICKS\",\"value\":\"Unburnt bricks\"},{\"key\":\"MUD\",\"value\":\"Mud\"},{\"key\":\"PLAIN_BLOCKS\",\"value\":\"Plain blocks\"},{\"key\":\"NON_APPLICABLE\",\"value\":\"Non-applicable\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"Tested positive during rcd":{"max":"999","min":"0","label":"Total number of people tested positive during RCD (Reactive case detection)","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Tested positive","fieldKey":"people_rcd_positive","isHidden":"false","fieldName":"Tested positive during rcd","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter number of positive people","requiredMessage":"Only number"},"Individuals who spent night":{"max":"9999","min":"0","label":"Total number of individuals who spent the last night in the household","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"individuals_on_last_night","fieldKey":"individuals_on_last_night","isHidden":"false","fieldName":"Individuals who spent night","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter people last night","requiredMessage":"Only number"},"Last method of contraception":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"last_method_of_contraception","hasError":false,"showCard":true,"fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"9\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","showContent":false,"displayValue":"Last method of contraception","errorMsgListKeys":[]},"LMP (Last Menstrual Period) date":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"lmp_date","hasError":false,"showCard":true,"fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"16\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''F''\"}]}}","displayType":"text","showContent":false,"displayValue":"LMP (Last Menstrual Period) date","errorMsgListKeys":[]},"Assigned user health infrastructure":{"events":"null","ngModel":"$infoData$.userHealthInfraDetails","fieldKey":"name","fieldName":"Assigned user health infrastructure","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Health infrastructure assigned to user"},"Do you have LLIN’s in the house ?":{"label":"Do you have LLIN’s in the house ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Do you have LLIN’s in the house ?","fieldKey":"having_llin_in_house","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Do you have LLIN’s in the house ?","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"YES\",\"value\":\"Yes\"},{\"key\":\"NO\",\"value\":\"No\"},{\"key\":\"DONT_KNOW\",\"value\":\"Dont know\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"Please specify other preventive measure":{"label":"Please specify other preventive measure","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Please specify other preventive measure","fieldKey":"other_preventive_measure","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Please specify other preventive measure","fieldType":"SHORT_TEXT","maxLength":"200","minLength":"0","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.received_any_other_prevention===true\"}]}}","placeholder":"Enter measures","showContent":false,"requiredMessage":"Please enter other preventive measure","errorMsgListKeys":[]},"Number of people living in the household":{"max":"999","min":"0","label":"Total number of individuals living in the household","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Number of people living in the household","fieldKey":"individuals_living","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Number of people living in the household","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter people living in household","showContent":false,"requiredMessage":"Enter only number","errorMsgListKeys":[]},"Have you taken medicene to prevent malaria infection in the past 30 days ?":{"label":"Have you taken medicene to prevent malaria infection in the past 30 days ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Have you taken medicene to prevent malaria infection in the past 30 days ?","fieldKey":"took_med_for_malaria_prevention","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Have you taken medicene to prevent malaria infection in the past 30 days ?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Did you receive any other malaria preventive measures in the past 30 days ?":{"label":"Did you receive any other malaria preventive measures in the past 30 days ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Did you receive any other malaria preventive measures in the past 30 days ?","fieldKey":"received_any_other_prevention","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Did you receive any other malaria preventive measures in the past 30 days ?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]}}}',
	current_version,
	97104,
	now(),
	97104,
	now(),
	'[{"title":"$formData$","isArray":false,"nodes":[{"title":"malariaNonIndexDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:327","path":"$formData$.malariaNonIndexDetails","backendConfigPath":"$formData$.malariaNonIndexDetails"}],"path":"$formData$","backendConfigPath":"$formData$","$$hashKey":"object:900"},{"title":"$infoData$","isArray":false,"nodes":[{"title":"memberDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:916","path":"$infoData$.memberDetails","backendConfigPath":"$infoData$.memberDetails"},{"title":"userHealthInfraDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:3684","path":"$infoData$.userHealthInfraDetails","backendConfigPath":"$infoData$.userHealthInfraDetails"}],"path":"$infoData$","backendConfigPath":"$infoData$","$$hashKey":"object:901"}]',
	null,
	'{"formVariables":[{"value":"ageInYears","type":"NUMBER","bindTo":"$utilityData$","setter":true,"setterMethodName":"setAgeInYears","setterMethodCode":"(function setAgeInYears() {\n\n\tlet ageParts = $infoData$.memberDetails.age.split('' '');\n    let years = isNaN(parseInt(ageParts[0])) ? 0 : parseInt(ageParts[0]);\n    $utilityData$.ageInYears = years;\n    console.log($utilityData$.ageInYears)\n\t\n});"},{"value":"minServiceDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinServiceDate","setterMethodCode":"(function setMinServiceDate() {\n\n$utilityData$.minServiceDate = $formData$.malariaNonIndexDetails.service_date ? moment($formData$.malariaNonIndexDetails.service_date) : moment().subtract(9, ''months'');\n\t\n});"},{"value":"minSprayDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinSprayDate","setterMethodCode":"(function setMinSprayDate() {\n\n\t$utilityData$.minSprayDate = moment().subtract(''years'', 2);\n\t\n});"},{"value":"userHealthInfra","type":"STRING","bindTo":"$utilityData$","setter":true,"setterMethodName":"setUserHealthInfra","setterMethodCode":"(function setUserHealthInfra() {\n\n\t/**\n\t* Setter method for $utilityData$.userHealthInfra (STRING)\n\t* Please see example below on how to set the value\n\t* $utilityData$.userHealthInfra = xxx;\n\t* You can use the available parameters\n\t*/\n\t\n});"}],"formMethods":[],"formQueries":[{"value":"Get Member Details","queryCode":"get_member_details","params":"member_id","paramConfig":"{\"member_id\":\"$stateParams$.id\"}","query":"select im.unique_health_id,concat_ws('' '', im.first_name,im.middle_name,im.last_name) as member_name,im.dob,im.gender,lfvd.value as marital_status,im.religion,im.nrc_number,cast(age(current_date, im.dob) as text) as age,im.lmp,im.last_method_of_contraception,cast(im.additional_info as json)->> ''hivTest'' as hiv_status,\nim.chronic_disease from imt_member im inner join listvalue_field_value_detail lfvd on im.marital_status=lfvd.id inner join imt_family imf on im.family_id=imf.family_id where im.id=#member_id#;","response":"$infoData$.memberDetails","isResultArray":null,"successMessage":null,"failureMessage":"Member details not found","isResponseMandatory":null,"isField":null,"isPagination":false},{"value":"Get Malaria Non Index Details","queryCode":"get_malaria_non_index_details","params":"member_id","paramConfig":"{\"member_id\":\"$stateParams$.id\"}","query":"select mnicd.service_date ,\nmnicd.has_consent_sought,\nmnicd.reason_for_no_consent,\nmnicd.individuals_on_last_night,\nmnicd.individuals_living,\nmnicd.people_tested_in_household,\nmnicd.people_rcd_positive,\nmnicd.sprayable_surface,\nmnicd.non_sprayable_surface,\nmnicd.was_irs_conducted,\nmnicd.date_of_last_spray,\nmnicd.having_llin_in_house,\nmnicd.number_of_llins_hanging,\nmnicd.sleep_under_llin,\nmnicd.took_dhap,\nmnicd.took_med_for_malaria_prevention,\nmnicd.received_any_other_prevention,\nmnicd.other_preventive_measure,\nmnicd.member_id\nfrom malaria_non_index_case_details mnicd where member_id=#member_id#","response":"$formData$.malariaNonIndexDetails","isResultArray":null,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":null,"isPagination":false},{"value":"Get health infra","queryCode":"get_user_health_infra","params":"userId","paramConfig":"{\"userId\":\"$loggedInUserId$\"}","query":"select hid.name from user_health_infrastructure uhi inner join health_infrastructure_details hid on uhi.health_infrastrucutre_id=hid.id where uhi.user_id = #userId# and uhi.is_default = true;\n","response":"$infoData$.userHealthInfraDetails","isResultArray":null,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":null,"isPagination":false}]}',
	'[{"type":"FORM_QUERY","value":"Get Member Details"},{"type":"FORM_QUERY","value":"Get Malaria Non Index Details"},{"type":"FORM_VARIABLE_SETTER","value":"ageInYears"},{"type":"FORM_VARIABLE_SETTER","value":"minServiceDate"},{"type":"FORM_VARIABLE_SETTER","value":"minSprayDate"},{"type":"FORM_QUERY","value":"Get health infra"},{"type":"FORM_VARIABLE_SETTER","value":"userHealthInfra"}]',
	'[{"queryCode":"update_malaria_non_index_Details","hasLoop":null,"queryPath":"$formData$.malariaNonIndexDetails","subQueries":[],"params":[{"key":"service_date","type":"FIELD","valueKey":"service_date"},{"key":"has_consent_sought","type":"FIELD","valueKey":"has_consent_sought"},{"key":"reason_for_no_consent","type":"FIELD","valueKey":"reason_for_no_consent"},{"key":"individuals_living","type":"FIELD","valueKey":"individuals_living"},{"key":"individuals_on_last_night","type":"FIELD","valueKey":"individuals_on_last_night"},{"key":"people_tested_in_household","type":"FIELD","valueKey":"people_tested_in_household"},{"key":"people_rcd_positive","type":"FIELD","valueKey":"people_rcd_positive"},{"key":"sprayable_surface","type":"FIELD","valueKey":"sprayable_surface"},{"key":"non_sprayable_surface","type":"FIELD","valueKey":"non_sprayable_surface"},{"key":"was_irs_conducted","type":"FIELD","valueKey":"was_irs_conducted"},{"key":"date_of_last_spray","type":"FIELD","valueKey":"date_of_last_spray"},{"key":"having_llin_in_house","type":"FIELD","valueKey":"having_llin_in_house"},{"key":"number_of_llins_hanging","type":"FIELD","valueKey":"number_of_llins_hanging"},{"key":"sleep_under_llin","type":"FIELD","valueKey":"sleep_under_llin"},{"key":"took_dhap","type":"FIELD","valueKey":"took_dhap"},{"key":"took_med_for_malaria_prevention","type":"FIELD","valueKey":"took_med_for_malaria_prevention"},{"key":"received_any_other_prevention","type":"FIELD","valueKey":"received_any_other_prevention"},{"key":"other_preventive_measure","type":"FIELD","valueKey":"other_preventive_measure"},{"key":"member_id","type":"META_DATA","valueKey":"$formData$.malariaNonIndexDetails.member_id"}],"isEventResource":null,"$$hashKey":"object:3911","queryName":"Update malaria non index details","query":"with updated_data as(\nupdate malaria_non_index_case_details\nset service_date=#service_date#,\nhas_consent_sought=#has_consent_sought#,\nreason_for_no_consent=#reason_for_no_consent#,\nindividuals_living=#individuals_living#,\nindividuals_on_last_night=#individuals_on_last_night#,\npeople_tested_in_household=#people_tested_in_household#,\npeople_rcd_positive=#people_rcd_positive#,\nsprayable_surface=#sprayable_surface#,\nnon_sprayable_surface=#non_sprayable_surface#,\nwas_irs_conducted=#was_irs_conducted#,\ndate_of_last_spray=#date_of_last_spray#,\nhaving_llin_in_house=#having_llin_in_house#,\nnumber_of_llins_hanging=#number_of_llins_hanging#,\nsleep_under_llin=#sleep_under_llin#,\ntook_dhap=#took_dhap#,\ntook_med_for_malaria_prevention=#took_med_for_malaria_prevention#,\nreceived_any_other_prevention=#received_any_other_prevention#,\nother_preventive_measure=#other_preventive_measure#,\nmodified_by = #loggedInUserId#,\nmodified_on=now()\nwhere member_id=#member_id#\nreturning malaria_non_index_case_details.id\n)\nselect id from updated_data;"}]'
FROM insert_into_medplat_form_master;


INSERT INTO medplat_form_version_history
("uuid", form_master_uuid, template_config, field_config, "version", created_by, created_on, modified_by, modified_on, form_object, template_css, form_vm, execution_sequence, query_config)
SELECT
	'dabbe799-1da2-6e2f-0873-c9ae0ebc059d',
	'c57149f6-1bf2-437c-82ae-12a5d78d33ce',
	'[{"type":"CARD","config":{"title":"Member Details","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unique_health_id","fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status","fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp_date","fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]},{"type":"CARD","config":{"title":"Screening Details","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"service_date","fieldName":"Service date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"reason_for_no_consent","fieldName":"Select reason","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"individuals_living","fieldName":"Number of people living in the household","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"people_tested_in_household","fieldName":"People tested in house","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"sprayable_surface","fieldName":"Sprayable surfaces (Walls)","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"was_irs_conducted","fieldName":"IRS conducted","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"having_llin_in_house","fieldName":"Do you have LLIN’s in the house ?","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"took_dhap","fieldName":"DHAP","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"took_med_for_malaria_prevention","fieldName":"Have you taken medicene to prevent malaria infection in the past 30 days ?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"name","fieldName":"Assigned user health infrastructure","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"has_consent_sought","fieldName":"Consent","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"individuals_on_last_night","fieldName":"Individuals who spent night","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"people_rcd_positive","fieldName":"Tested positive during rcd","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"non_sprayable_surface","fieldName":"Non sprayable surfaces","fieldType":"DROPDOWN","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"date_of_last_spray","fieldName":"Date of last spray","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"number_of_llins_hanging","fieldName":"LLIN hanging","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"sleep_under_llin","fieldName":"Sleep under LLIN","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"received_any_other_prevention","fieldName":"Did you receive any other malaria preventive measures in the past 30 days ?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"other_preventive_measure","fieldName":"Please specify other preventive measure","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]}]',
	'{"MALARIA_NON_INDEX":{"Age":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"age","hasError":false,"showCard":true,"fieldName":"Age","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Age","errorMsgListKeys":[]},"DOB":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"dob","hasError":false,"showCard":true,"fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","dateFormat":"dd/MM/yyyy","disability":"null","requirable":"null","visibility":"null","displayType":"date","showContent":false,"displayValue":"DOB","errorMsgListKeys":[]},"DHAP":{"label":"Did you take DHAp in the past 30 days ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"DHAP","fieldKey":"took_dhap","hasError":false,"isHidden":"false","showCard":false,"fieldName":"DHAP","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Gender":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"gender","hasError":false,"showCard":true,"fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Gender","errorMsgListKeys":[]},"Consent":{"label":"Has consent been sought?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Consent","fieldKey":"has_consent_sought","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Consent","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Please select yes or no","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose","errorMsgListKeys":[]},"Religion":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"religion","hasError":false,"showCard":true,"fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Religion","errorMsgListKeys":[]},"Memeber ID":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"unique_health_id","hasError":false,"showCard":true,"fieldName":"Memeber ID","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Member ID","errorMsgListKeys":[]},"NRC Number":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"nrc_number","hasError":false,"showCard":true,"fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"NRC Number","errorMsgListKeys":[]},"HIV Display":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"hiv_status","hasError":false,"showCard":true,"fieldName":"HIV Display","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"HIV status","errorMsgListKeys":[]},"Member Name":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"member_name","hasError":false,"showCard":true,"fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Member Name","errorMsgListKeys":[]},"LLIN hanging":{"max":"999","min":"0","label":"How many LLINs are hanging in the house ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"LLIN hanging","fieldKey":"number_of_llins_hanging","isHidden":"false","fieldName":"LLIN hanging","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.having_llin_in_house===''YES''\"}]}}","placeholder":"Enter number of LLIN","requiredMessage":"Only number"},"Service date":{"label":"Service Date","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Service date","fieldKey":"service_date","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Service date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Service date","showContent":false,"maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minServiceDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Please enter service date","errorMsgListKeys":[]},"IRS conducted":{"label":"Was IRS (Indoor Residual Spraying) conducted in that house in the past 12 months","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"IRS conducted","fieldKey":"was_irs_conducted","hasError":false,"isHidden":"false","showCard":false,"fieldName":"IRS conducted","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Select reason":{"label":"Select reason","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Select reason","fieldKey":"reason_for_no_consent","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Select reason","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.has_consent_sought===false\"}]}}","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"REFUSAL\",\"value\":\"Refusal\"},{\"key\":\"FOLLOW_UP_DONE_IN_PAST_MONTH\",\"value\":\"Follow up already done in the past one month\"},{\"key\":\"NO_HOUSEHOLD_MEMBER_FOUND\",\"value\":\"No household member found\"},{\"key\":\"BELOW_LEGAL_AGE\",\"value\":\"Household member are below the legal age of consent\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"Marital Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"marital_status","hasError":false,"showCard":true,"fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Marital Status","errorMsgListKeys":[]},"Chronic Diseases":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"chronic_disease","hasError":false,"showCard":true,"fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","showContent":false,"displayValue":"Chronic Diseases","errorMsgListKeys":[]},"Sleep under LLIN":{"label":"Did you sleep under LLIN last night ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Sleep under LLIN","fieldKey":"sleep_under_llin","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Sleep under LLIN","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Date of last spray":{"label":"Date of last spray","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Date of last spray","fieldKey":"date_of_last_spray","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Date of last spray","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.was_irs_conducted===true\"}]}}","placeholder":"Enter date","showContent":false,"maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minSprayDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Enter date","errorMsgListKeys":[]},"Non sprayable surfaces":{"label":"Non sprayable surfaces","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Non sprayable surfaces","fieldKey":"non_sprayable_surface","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Non sprayable surfaces","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"GRASS\",\"value\":\"Grass\"},{\"key\":\"GLASS\",\"value\":\"Glass\"},{\"key\":\"REEDS\",\"value\":\"Reeds\"},{\"key\":\"METAL\",\"value\":\"Metal\"},{\"key\":\"PLASTIC\",\"value\":\"Plastic\"},{\"key\":\"NON_APPLICABLE\",\"value\":\"Non-applicable\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"People tested in house":{"max":"999","min":"0","label":"Total number of people tested in the household","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"People tested in house","fieldKey":"people_tested_in_household","isHidden":"false","fieldName":"People tested in house","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter number of people tested","requiredMessage":"Only number"},"Sprayable surfaces (Walls)":{"label":"Sprayable surfaces (Walls)","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Sprayable surfaces (Walls)","fieldKey":"sprayable_surface","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Sprayable surfaces (Walls)","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"PLASTERED_AND_PAINTED\",\"value\":\"Plastered and painted\"},{\"key\":\"PLASTERED_NOT_PAINTED\",\"value\":\"Plastered not painted\"},{\"key\":\"BURNT_BRICKS\",\"value\":\"Burnt bricks\"},{\"key\":\"UNBURNT_BRICKS\",\"value\":\"Unburnt bricks\"},{\"key\":\"MUD\",\"value\":\"Mud\"},{\"key\":\"PLAIN_BLOCKS\",\"value\":\"Plain blocks\"},{\"key\":\"NON_APPLICABLE\",\"value\":\"Non-applicable\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"Tested positive during rcd":{"max":"999","min":"0","label":"Total number of people tested positive during RCD (Reactive case detection)","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Tested positive","fieldKey":"people_rcd_positive","isHidden":"false","fieldName":"Tested positive during rcd","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter number of positive people","requiredMessage":"Only number"},"Individuals who spent night":{"max":"9999","min":"0","label":"Total number of individuals who spent the last night in the household","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"individuals_on_last_night","fieldKey":"individuals_on_last_night","isHidden":"false","fieldName":"Individuals who spent night","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter people last night","requiredMessage":"Only number"},"Last method of contraception":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"last_method_of_contraception","hasError":false,"showCard":true,"fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"9\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","showContent":false,"displayValue":"Last method of contraception","errorMsgListKeys":[]},"LMP (Last Menstrual Period) date":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"lmp_date","hasError":false,"showCard":true,"fieldName":"LMP (Last Menstrual Period) date","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"GTE\",\"value1\":\"16\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"110\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''F''\"}]}}","displayType":"text","showContent":false,"displayValue":"LMP (Last Menstrual Period) date","errorMsgListKeys":[]},"Assigned user health infrastructure":{"events":"null","ngModel":"$infoData$.userHealthInfraDetails","fieldKey":"name","fieldName":"Assigned user health infrastructure","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Health infrastructure assigned to user"},"Do you have LLIN’s in the house ?":{"label":"Do you have LLIN’s in the house ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Do you have LLIN’s in the house ?","fieldKey":"having_llin_in_house","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Do you have LLIN’s in the house ?","fieldType":"DROPDOWN","disability":"null","isDisabled":"false","isMultiple":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"--select--","showContent":false,"staticOptions":"[{\"key\":\"YES\",\"value\":\"Yes\"},{\"key\":\"NO\",\"value\":\"No\"},{\"key\":\"DONT_KNOW\",\"value\":\"Dont know\"}]","requiredMessage":"Choose","errorMsgListKeys":[],"additionalStaticOptionsRequired":"false"},"Please specify other preventive measure":{"label":"Please specify other preventive measure","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Please specify other preventive measure","fieldKey":"other_preventive_measure","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Please specify other preventive measure","fieldType":"SHORT_TEXT","maxLength":"200","minLength":"0","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$formData$.malariaNonIndexDetails.received_any_other_prevention===true\"}]}}","placeholder":"Enter measures","showContent":false,"requiredMessage":"Please enter other preventive measure","errorMsgListKeys":[]},"Number of people living in the household":{"max":"999","min":"0","label":"Total number of individuals living in the household","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Number of people living in the household","fieldKey":"individuals_living","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Number of people living in the household","fieldType":"NUMBER","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","placeholder":"Enter people living in household","showContent":false,"requiredMessage":"Enter only number","errorMsgListKeys":[]},"Have you taken medicene to prevent malaria infection in the past 30 days ?":{"label":"Have you taken medicene to prevent malaria infection in the past 30 days ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Have you taken medicene to prevent malaria infection in the past 30 days ?","fieldKey":"took_med_for_malaria_prevention","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Have you taken medicene to prevent malaria infection in the past 30 days ?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]},"Did you receive any other malaria preventive measures in the past 30 days ?":{"label":"Did you receive any other malaria preventive measures in the past 30 days ?","events":"null","ngModel":"$formData$.malariaNonIndexDetails","tooltip":"Did you receive any other malaria preventive measures in the past 30 days ?","fieldKey":"received_any_other_prevention","hasError":false,"isHidden":"false","showCard":false,"fieldName":"Did you receive any other malaria preventive measures in the past 30 days ?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Choose","showContent":false,"staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Choose yes or no","errorMsgListKeys":[]}}}',
	'DRAFT',
	97104,
	now(),
	97104,
	now(),
	'[{"title":"$formData$","isArray":false,"nodes":[{"title":"malariaNonIndexDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:327","path":"$formData$.malariaNonIndexDetails","backendConfigPath":"$formData$.malariaNonIndexDetails"}],"path":"$formData$","backendConfigPath":"$formData$","$$hashKey":"object:900"},{"title":"$infoData$","isArray":false,"nodes":[{"title":"memberDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:916","path":"$infoData$.memberDetails","backendConfigPath":"$infoData$.memberDetails"},{"title":"userHealthInfraDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:3684","path":"$infoData$.userHealthInfraDetails","backendConfigPath":"$infoData$.userHealthInfraDetails"}],"path":"$infoData$","backendConfigPath":"$infoData$","$$hashKey":"object:901"}]',
	null,
	'{"formVariables":[{"value":"ageInYears","type":"NUMBER","bindTo":"$utilityData$","setter":true,"setterMethodName":"setAgeInYears","setterMethodCode":"(function setAgeInYears() {\n\n\tlet ageParts = $infoData$.memberDetails.age.split('' '');\n    let years = isNaN(parseInt(ageParts[0])) ? 0 : parseInt(ageParts[0]);\n    $utilityData$.ageInYears = years;\n    console.log($utilityData$.ageInYears)\n\t\n});"},{"value":"minServiceDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinServiceDate","setterMethodCode":"(function setMinServiceDate() {\n\n$utilityData$.minServiceDate = $formData$.malariaNonIndexDetails.service_date ? moment($formData$.malariaNonIndexDetails.service_date) : moment().subtract(9, ''months'');\n\t\n});"},{"value":"minSprayDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinSprayDate","setterMethodCode":"(function setMinSprayDate() {\n\n\t$utilityData$.minSprayDate = moment().subtract(''years'', 2);\n\t\n});"},{"value":"userHealthInfra","type":"STRING","bindTo":"$utilityData$","setter":true,"setterMethodName":"setUserHealthInfra","setterMethodCode":"(function setUserHealthInfra() {\n\n\t/**\n\t* Setter method for $utilityData$.userHealthInfra (STRING)\n\t* Please see example below on how to set the value\n\t* $utilityData$.userHealthInfra = xxx;\n\t* You can use the available parameters\n\t*/\n\t\n});"}],"formMethods":[],"formQueries":[{"value":"Get Member Details","queryCode":"get_member_details","params":"member_id","paramConfig":"{\"member_id\":\"$stateParams$.id\"}","query":"select im.unique_health_id,concat_ws('' '', im.first_name,im.middle_name,im.last_name) as member_name,im.dob,im.gender,lfvd.value as marital_status,im.religion,im.nrc_number,cast(age(current_date, im.dob) as text) as age,im.lmp,im.last_method_of_contraception,cast(im.additional_info as json)->> ''hivTest'' as hiv_status,\nim.chronic_disease from imt_member im inner join listvalue_field_value_detail lfvd on im.marital_status=lfvd.id inner join imt_family imf on im.family_id=imf.family_id where im.id=#member_id#;","response":"$infoData$.memberDetails","isResultArray":null,"successMessage":null,"failureMessage":"Member details not found","isResponseMandatory":null,"isField":null,"isPagination":false},{"value":"Get Malaria Non Index Details","queryCode":"get_malaria_non_index_details","params":"member_id","paramConfig":"{\"member_id\":\"$stateParams$.id\"}","query":"select mnicd.service_date ,\nmnicd.has_consent_sought,\nmnicd.reason_for_no_consent,\nmnicd.individuals_on_last_night,\nmnicd.individuals_living,\nmnicd.people_tested_in_household,\nmnicd.people_rcd_positive,\nmnicd.sprayable_surface,\nmnicd.non_sprayable_surface,\nmnicd.was_irs_conducted,\nmnicd.date_of_last_spray,\nmnicd.having_llin_in_house,\nmnicd.number_of_llins_hanging,\nmnicd.sleep_under_llin,\nmnicd.took_dhap,\nmnicd.took_med_for_malaria_prevention,\nmnicd.received_any_other_prevention,\nmnicd.other_preventive_measure,\nmnicd.member_id\nfrom malaria_non_index_case_details mnicd where member_id=#member_id#","response":"$formData$.malariaNonIndexDetails","isResultArray":null,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":null,"isPagination":false},{"value":"Get health infra","queryCode":"get_user_health_infra","params":"userId","paramConfig":"{\"userId\":\"$loggedInUserId$\"}","query":"select hid.name from user_health_infrastructure uhi inner join health_infrastructure_details hid on uhi.health_infrastrucutre_id=hid.id where uhi.user_id = #userId# and uhi.is_default = true;\n","response":"$infoData$.userHealthInfraDetails","isResultArray":null,"successMessage":null,"failureMessage":null,"isResponseMandatory":null,"isField":null,"isPagination":false}]}',
	'[{"type":"FORM_QUERY","value":"Get Member Details"},{"type":"FORM_QUERY","value":"Get Malaria Non Index Details"},{"type":"FORM_VARIABLE_SETTER","value":"ageInYears"},{"type":"FORM_VARIABLE_SETTER","value":"minServiceDate"},{"type":"FORM_VARIABLE_SETTER","value":"minSprayDate"},{"type":"FORM_QUERY","value":"Get health infra"},{"type":"FORM_VARIABLE_SETTER","value":"userHealthInfra"}]',
	'[{"queryCode":"update_malaria_non_index_Details","hasLoop":null,"queryPath":"$formData$.malariaNonIndexDetails","subQueries":[],"params":[{"key":"service_date","type":"FIELD","valueKey":"service_date"},{"key":"has_consent_sought","type":"FIELD","valueKey":"has_consent_sought"},{"key":"reason_for_no_consent","type":"FIELD","valueKey":"reason_for_no_consent"},{"key":"individuals_living","type":"FIELD","valueKey":"individuals_living"},{"key":"individuals_on_last_night","type":"FIELD","valueKey":"individuals_on_last_night"},{"key":"people_tested_in_household","type":"FIELD","valueKey":"people_tested_in_household"},{"key":"people_rcd_positive","type":"FIELD","valueKey":"people_rcd_positive"},{"key":"sprayable_surface","type":"FIELD","valueKey":"sprayable_surface"},{"key":"non_sprayable_surface","type":"FIELD","valueKey":"non_sprayable_surface"},{"key":"was_irs_conducted","type":"FIELD","valueKey":"was_irs_conducted"},{"key":"date_of_last_spray","type":"FIELD","valueKey":"date_of_last_spray"},{"key":"having_llin_in_house","type":"FIELD","valueKey":"having_llin_in_house"},{"key":"number_of_llins_hanging","type":"FIELD","valueKey":"number_of_llins_hanging"},{"key":"sleep_under_llin","type":"FIELD","valueKey":"sleep_under_llin"},{"key":"took_dhap","type":"FIELD","valueKey":"took_dhap"},{"key":"took_med_for_malaria_prevention","type":"FIELD","valueKey":"took_med_for_malaria_prevention"},{"key":"received_any_other_prevention","type":"FIELD","valueKey":"received_any_other_prevention"},{"key":"other_preventive_measure","type":"FIELD","valueKey":"other_preventive_measure"},{"key":"member_id","type":"META_DATA","valueKey":"$formData$.malariaNonIndexDetails.member_id"}],"isEventResource":null,"$$hashKey":"object:3911","queryName":"Update malaria non index details","query":"with updated_data as(\nupdate malaria_non_index_case_details\nset service_date=#service_date#,\nhas_consent_sought=#has_consent_sought#,\nreason_for_no_consent=#reason_for_no_consent#,\nindividuals_living=#individuals_living#,\nindividuals_on_last_night=#individuals_on_last_night#,\npeople_tested_in_household=#people_tested_in_household#,\npeople_rcd_positive=#people_rcd_positive#,\nsprayable_surface=#sprayable_surface#,\nnon_sprayable_surface=#non_sprayable_surface#,\nwas_irs_conducted=#was_irs_conducted#,\ndate_of_last_spray=#date_of_last_spray#,\nhaving_llin_in_house=#having_llin_in_house#,\nnumber_of_llins_hanging=#number_of_llins_hanging#,\nsleep_under_llin=#sleep_under_llin#,\ntook_dhap=#took_dhap#,\ntook_med_for_malaria_prevention=#took_med_for_malaria_prevention#,\nreceived_any_other_prevention=#received_any_other_prevention#,\nother_preventive_measure=#other_preventive_measure#,\nmodified_by = #loggedInUserId#,\nmodified_on=now()\nwhere member_id=#member_id#\nreturning malaria_non_index_case_details.id\n)\nselect id from updated_data;"}]'
ON CONFLICT (form_master_uuid, "version")
DO UPDATE
SET
	form_master_uuid=EXCLUDED.form_master_uuid,
	template_config=EXCLUDED.template_config, 
	field_config=EXCLUDED.field_config, 
	"version"=EXCLUDED."version", 
	created_by=EXCLUDED.created_by,
	created_on=EXCLUDED.created_on,
	modified_by=EXCLUDED.modified_by,
	modified_on=EXCLUDED.modified_on,
	form_object=EXCLUDED.form_object,
	template_css=EXCLUDED.template_css,
	form_vm=EXCLUDED.form_vm,
	execution_sequence=EXCLUDED.execution_sequence,
	query_config=EXCLUDED.query_config;
