with insert_into_medplat_form_master as (
	INSERT INTO medplat_form_master
	("uuid", form_name, form_code, current_version, state, created_by, created_on, modified_by, modified_on, menu_config_id)
	SELECT
		'db103712-3d4d-4400-9bd4-1990970c9533',
		'HIV Known Positive',
		'KNOWN_POSITIVE',
		'1',
		'ACTIVE',
		97104,
		now(),
		97104,
		now(),
		393
	ON CONFLICT (form_code)
	DO UPDATE
	SET
		uuid=EXCLUDED."uuid",
		form_name=EXCLUDED.form_name,
		current_version=cast(cast(coalesce((select max(cast(medplat_form_version_history.version as integer)) from medplat_form_master inner join medplat_form_version_history on medplat_form_master.uuid  = medplat_form_version_history.form_master_uuid where medplat_form_master.form_code = EXCLUDED.form_code and medplat_form_version_history.version <> 'DRAFT'),'0') as integer) + 1 as text),
		state=EXCLUDED.state,
		created_by=EXCLUDED.created_by,
		created_on=EXCLUDED.created_on,
		modified_by=EXCLUDED.modified_by,
		modified_on=EXCLUDED.modified_on,
		menu_config_id=EXCLUDED.menu_config_id
	returning medplat_form_master.current_version
)
INSERT INTO medplat_form_version_history
("uuid", form_master_uuid, template_config, field_config, "version", created_by, created_on, modified_by, modified_on, form_object, template_css, form_vm, execution_sequence, query_config)
SELECT
	'751701b2-7139-c4e0-e0e4-f9ff5a1c2fed',
	'db103712-3d4d-4400-9bd4-1990970c9533',
	'[{"type":"CARD","config":{"title":"Member Infomation","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unique_health_id","fieldName":"Member ID","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp","fieldName":"LMP","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"family_phone_no","fieldName":"Family Phone No.","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"family_address","fieldName":"Family Address","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":""}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status","fieldName":"HIV Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"immunisation_given","fieldName":"Immunization status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]},{"type":"CARD","config":{"title":"Screening Details","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[]}]},{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"service_date","fieldName":"Service Date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"serptrin","fieldName":"Septrin taken ?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"duration","fieldName":"Septrin duration","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"taken_art","fieldName":"Taking ART","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"other_medication_along","fieldName":"Other medication along with ART","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"enough_medication","fieldName":"Enough medication supply","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"refillMsg","fieldName":"Counsel for medication","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"viral_load_test","fieldName":"Viral load test","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"viralLoadMsg","fieldName":"Viral Load test msg","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"viral_load_suppressed","fieldName":"Viral load suppressed","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unprotected_sex","fieldName":"Unprotected sex","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status_of_member_known","fieldName":"HIV status of member known","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"willing_to_share_status","fieldName":"Share contact details","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]},{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"name","fieldName":"Name","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"address","fieldName":"Address","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"phone_number","fieldName":"Phone Number","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]},{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"protectionMsg","fieldName":"Protection Msg","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp_date","fieldName":"LMP date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"stopped_art","fieldName":"ART stopped because of challenges","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"arvMsg","fieldName":"ARV Msg","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"arv_taken","fieldName":"ARVs treatment past","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"when_stopped","fieldName":"ARV stopped","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"reassureClient","fieldName":"Reassure client","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"place_received_art","fieldName":"ARV Place","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]}]',
	'{"KNOWN_POSITIVE":{"Age":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Age"},"DOB":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","dateFormat":"dd/MM/yyyy","disability":"null","requirable":"null","visibility":"null","displayType":"date","displayValue":"DOB"},"LMP":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"lmp","fieldName":"LMP","fieldType":"INFORMATION_DISPLAY","dateFormat":"dd/MM/yyyy","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''Female''\"}]}}","displayType":"date","displayValue":"LMP"},"Name":{"label":"Name","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Name","fieldKey":"name","isHidden":"false","fieldName":"Name","fieldType":"SHORT_TEXT","maxLength":"100","minLength":"3","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.willing_to_share_status\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Name","requiredMessage":"Enter name"},"Gender":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Gender"},"ARV Msg":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"arvMsg","fieldName":"ARV Msg","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Male''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LT\",\"value1\":\"15\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"GT\",\"value1\":\"80\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}]}}]}}","isClickable":"false"},"Address":{"label":"Address","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Address","fieldKey":"address","isHidden":"false","fieldName":"Address","fieldType":"SHORT_TEXT","maxLength":"100","minLength":"1","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.willing_to_share_status\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Address","requiredMessage":"Enter address"},"LMP date":{"label":"LMP date","events":"null","ngModel":"$formData$.hivDetails","tooltip":"LMP date","fieldKey":"lmp_date","isHidden":"false","fieldName":"LMP date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"BT\",\"value1\":\"15\",\"value2\":\"80\",\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"LMP date","maxDateField":"{\"key\":\"$formData$.hivDetails.service_date\",\"type\":\"FIELD\"}","minDateField":"{\"key\":\"$utilityData$.minLmpDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Enter date"},"Religion":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Religion"},"ARV Place":{"label":"Where did you receive ARVs (Antiretrovirals) from in the past","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Where did you receive ARVs (Antiretrovirals) from in the past","fieldKey":"place_received_art","isHidden":"false","fieldName":"ARV Place","fieldType":"SHORT_TEXT","maxLength":"50","minLength":"1","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQWithType\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.arv_taken\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Where did you receive ARVs (Antiretrovirals) from in the past","requiredMessage":"Enter place"},"Member ID":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"unique_health_id","fieldName":"Member ID","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member ID"},"HIV Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"hiv_status","fieldName":"HIV Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"HIV Status"},"NRC Number":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"NRC Number"},"Taking ART":{"label":"Are you taking ART ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Are you taking ART ?","fieldKey":"taken_art","isHidden":"false","fieldName":"Taking ART","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Are you taking ART ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"ARV stopped":{"label":"When did you stop taking ARVs (Antiretrovirals) ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"When did you stop taking ARVs (Antiretrovirals) ?","fieldKey":"when_stopped","isHidden":"false","fieldName":"ARV stopped","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQWithType\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.arv_taken\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"When did you stop taking ARVs (Antiretrovirals) ?","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.dob\",\"type\":\"VARIABLE\"}","requiredMessage":"Select option"},"Member Name":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member Name"},"Phone Number":{"max":"10","min":"10","label":"Phone Number","events":"null","ngModel":"$formData$.hivDetails","pattern":"^\\d{1,13}$","tooltip":"Phone Number","fieldKey":"phone_number","isHidden":"false","fieldName":"Phone Number","fieldType":"NUMBER","disability":"null","hasPattern":"true","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.willing_to_share_status\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Phone Number","patternMessage":"Enter valid phone number","requiredMessage":"Enter phone no"},"Service Date":{"label":"Service Date","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Service Date","fieldKey":"service_date","isHidden":"false","fieldName":"Service Date","fieldType":"DATE","disability":"null","isDisabled":"true","isRequired":"false","requirable":"null","visibility":"null","placeholder":"Service Date","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minServiceDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Select date"},"Family Address":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"family_address","fieldName":"Family Address","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Family Address"},"Marital Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Marital Status"},"Protection Msg":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"protectionMsg","fieldName":"Protection Msg","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.unprotected_sex\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Reassure client":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"reassureClient","fieldName":"Reassure client","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQWithType\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.arv_taken\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Septrin taken ?":{"label":"Have you ever taken septrin before ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you ever taken septrin before ?","fieldKey":"serptrin","isHidden":"false","fieldName":"Septrin taken ?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Have you ever taken septrin before ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Unprotected sex":{"label":"Had unprotected sex in the last six months ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Had unprotected sex in the last six months ?","fieldKey":"unprotected_sex","isHidden":"false","fieldName":"Unprotected sex","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"BT\",\"value1\":\"15\",\"value2\":\"80\",\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Had unprotected sex in the last six months ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Viral load test":{"label":"Viral load test in the last six months ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you had a viral load test in the last six months ?","fieldKey":"viral_load_test","isHidden":"false","fieldName":"Viral load test","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Have you had a viral load test in the last six months","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Chronic Diseases":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Chronic Diseases"},"Family Phone No.":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"family_phone_no","fieldName":"Family Phone No.","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Family Phone No."},"Septrin duration":{"label":"Taking septrin since when ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Taking septrin since when ?","fieldKey":"duration","isHidden":"false","fieldName":"Septrin duration","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.serptrin\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Taking septrin since when ?","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.dob\",\"type\":\"VARIABLE\"}","requiredMessage":"Select date"},"ARVs treatment past":{"label":"Have you taken any ARVs (Antiretrovirals) for treatment in the past ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you taken any ARVs (Antiretrovirals) for treatment in the past ?","fieldKey":"arv_taken","isHidden":"false","fieldName":"ARVs treatment past","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Male''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LT\",\"value1\":\"15\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"GT\",\"value1\":\"80\",\"value2\":null,\"fieldName\":\"$utilityData$.dob\",\"queryCode\":null,\"expression\":null}]}}]}}]}}","optionsType":"staticOptions","placeholder":"Have you taken any ARVs (Antiretrovirals) for treatment in the past ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Immunization status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"immunisation_given","fieldName":"Immunization status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"5\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","displayValue":"Immunization status"},"Viral Load test msg":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"viralLoadMsg","fieldName":"Viral Load test msg","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null},{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"false\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.viral_load_test\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Share contact details":{"label":"Willing to share the contact details of the person you have had unprotected sex with?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Willing to share the contact details of the person you have had unprotected sex with?","fieldKey":"willing_to_share_status","isHidden":"false","fieldName":"Share contact details","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.unprotected_sex\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Willing to share the contact details of the person you have had unprotected sex with?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Viral load suppressed":{"label":"Is your Viral Load Suppressed ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Is your Viral Load Suppressed ?","fieldKey":"viral_load_suppressed","isHidden":"false","fieldName":"Viral load suppressed","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Is your Viral Load Suppressed ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Counsel for medication":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"refillMsg","fieldName":"Counsel for medication","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null},{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"false\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.enough_medication\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Enough medication supply":{"label":"Do you have enough supply of your medication for the next 1 week ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Do you have enough supply of your medication for the next 1 week ?","fieldKey":"enough_medication","isHidden":"false","fieldName":"Enough medication supply","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Do you have enough supply of your medication for the next 1 week ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"HIV status of member known":{"label":"Do you know the HIV status you had unprotected sex with?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Do you know the HIV status you had unprotected sex with?","fieldKey":"hiv_status_of_member_known","isHidden":"false","fieldName":"HIV status of member known","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.unprotected_sex\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Do you know the HIV status you had unprotected sex with?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Last method of contraception":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"BT\",\"value1\":\"9\",\"value2\":\"110\",\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","displayValue":"Last method of contraception"},"Other medication along with ART":{"label":"Taking any other medication along with ART","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Are you taking any other medication along with ART ?","fieldKey":"other_medication_along","isHidden":"false","fieldName":"Other medication along with ART","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Are you taking any other medication along with ART","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"ART stopped because of challenges":{"label":"Have you been on treatment for ART (Anti-retroviral Therapy) then stopped because of some challenges or side effects of the drugs ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you been on treatment for ART (Anti-retroviral Therapy) then stopped because of some challenges or side effects of the drugs ?","fieldKey":"stopped_art","isHidden":"false","fieldName":"ART stopped because of challenges","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Male''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LT\",\"value1\":\"15\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"GT\",\"value1\":\"80\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}]}}]}}","optionsType":"staticOptions","placeholder":"Have you been on treatment for ART (Anti-retroviral Therapy) then stopped because of some challenges or side effects of the drugs ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"}}}',
	current_version,
	97104,
	now(),
	97104,
	now(),
	'[{"title":"$formData$","isArray":false,"nodes":[{"title":"hivDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:866","path":"$formData$.hivDetails","backendConfigPath":"$formData$.hivDetails"}],"path":"$formData$","backendConfigPath":"$formData$","$$hashKey":"object:844"},{"title":"$infoData$","isArray":false,"nodes":[{"title":"memberDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:878","path":"$infoData$.memberDetails","backendConfigPath":"$infoData$.memberDetails"}],"path":"$infoData$","backendConfigPath":"$infoData$","$$hashKey":"object:845"}]',
	'label {
    white-space: normal !important;
    line-height: 1.75 !important;
}',
	'{"formVariables":[{"value":"ageInYears","type":"NUMBER","bindTo":"$utilityData$","setter":true,"setterMethodName":"setAgeInYears","setterMethodCode":"(function setAgeInYears() {\n\n    let ageParts = $infoData$.memberDetails.age.split('' '');\n    let years = 0;\n    if (ageParts.length < 6) {\n        years = 0\n    }\n    else {\n        years = isNaN(parseInt(ageParts[0])) ? 0 : parseInt(ageParts[0]);\n    }\n    $utilityData$.ageInYears = years;\n\t\n});"},{"value":"dob","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setDob","setterMethodCode":"(function setDob() {\n\n$utilityData$.dob = $infoData$.memberDetails.dob;\n\t\n});"},{"value":"minServiceDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinServiceDate","setterMethodCode":"(function setMinServiceDate() {\n\n    $utilityData$.minServiceDate = $formData$.hivDetails.service_date && moment($formData$.hivDetails.service_date).isAfter(moment().subtract(9, ''months'')) ? moment($formData$.hivDetails.service_date).add(1, ''day'') : moment().subtract(9, ''months'');\n\t\n});"},{"value":"minLmpDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinLmpDate","setterMethodCode":"(function setMinLmpDate() {\n\n$utilityData$.minLmpDate = moment($infoData$.memberDetails.last_delivery_date).isAfter(moment().subtract(9, ''months'')) ? moment($infoData$.memberDetails.last_delivery_date).add(1, ''day'') : moment().subtract(9, ''months'');\n\t\n});"}],"formMethods":[{"value":"setCounselMsgs","code":"(function setCounselMsgs() {\n    $formData$.hivDetails.refillMsg = ''Counsel client to get a refill of medication before it runs out.'';\n\t$formData$.hivDetails.viralLoadMsg = ''Counsel client to schedule viral load testing.'';\n\t$formData$.hivDetails.protectionMsg = ''Counsel client on important of having protected sex to avoid infecting others and being reinfected.'';\n\t$formData$.hivDetails.arvMsg = ''Counsel the client on the importance of disclosing if they have ever taken ARVs as this will help the clinician manage them accordingly. Furthermore, reassure the client that they will not be penalized nor their health benefits be withdrawn for disclosing.'';\n    $formData$.hivDetails.reassureClient = ''Ask the clients to open up and reassure them that you will go with him or her to the facility and explain to the Nurses if he or she had defaulted.'';\n    \n});"}],"formQueries":[{"value":"Fetch hiv details","queryCode":"fetch_hiv_details","params":"tableId","paramConfig":"{\"tableId\":\"$stateParams$.id\"}","query":"select \nrhkm.id,\nrhkm.member_id,\n--rhkm.service_date,\nrhkm.serptrin,\nrhkm.duration,\nrhkm.taken_art,\nrhkm.stopped_art,\nrhkm.arv_taken,\nrhkm.when_stopped,\nrhkm.place_received_art,\nrhkm.other_medication_along,\nrhkm.enough_medication,\nrhkm.viral_load_test,\nrhkm.viral_load_suppressed,\nrhkm.unprotected_sex,\nrhkm.hiv_status_of_member_known,\nrhkm.willing_to_share_status,\nrhkm.name,\nrhkm.phone_number,\nrhkm.address,\nrhkm.lmp_date\nfrom rch_hiv_known_master rhkm \nwhere id = #tableId#\norder by id desc limit 1;","response":"$formData$.hivDetails","isResultArray":false,"successMessage":null,"failureMessage":"Screening details not found.","isResponseMandatory":true,"isField":false,"isPagination":false,"toVariable":false},{"value":"Fetch member details","queryCode":"fetch_mem_details","params":"memberId","paramConfig":"{\"memberId\":\"$formData$.hivDetails.member_id\"}","query":"with hof_det as (\nselect im.mobile_number \nfrom imt_member im\nwhere im.family_id = (select family_id from imt_member where id = #memberId#)\nand im.family_head\n)\nselect im.unique_health_id,\nconcat_ws('' '',im.first_name,im.middle_name,im.last_name) as member_name,\ncast(age(im.dob) as text) as age,\nim.dob,\ncase when im.gender = ''F'' then ''Female'' else ''Male'' end as gender,\t\nim.nrc_number,\n(select value from listvalue_field_value_detail where id = im.marital_status) as marital_status,\n(select value from listvalue_field_value_detail where cast(id as text) = imf.religion) as religion,\ncase when im.last_method_of_contraception = ''NATURAL_METHODS'' then ''Natural methods''\nwhen im.last_method_of_contraception = ''ORALPILLS'' or im.last_method_of_contraception = ''ORAL_PILLS'' then ''Oral pills''\nwhen im.last_method_of_contraception = ''IUCD5'' then ''IUCD 5 years''\nwhen im.last_method_of_contraception = ''IUCD10'' then ''IUCD 10 years''\nwhen im.last_method_of_contraception = ''STERILIZATION'' then ''Sterilization''\nwhen im.last_method_of_contraception = ''CONDOM'' then ''Condom''\nwhen im.last_method_of_contraception = ''MLSTR'' then ''Male sterilization''\nwhen im.last_method_of_contraception = ''CONTRA'' then ''Emergency Contraceptive Pills''\nwhen im.last_method_of_contraception = ''INJECTABLES'' then ''Injectables''\nwhen im.last_method_of_contraception = ''BARRIER_METHOD'' then ''Barrier Method''\nwhen im.last_method_of_contraception = ''CHHAYA'' then ''Chhaya''\nwhen im.last_method_of_contraception = ''ANTARA'' then ''Antara''\nelse im.last_method_of_contraception end as last_method_of_contraception,\nim.lmp,\ncast(im.additional_info as json)->> ''hivTest'' as hiv_status,\nim.chronic_disease,\nim.birth_cert_number,\nim.mother_name,\nim.birth_weight,\nim.weight,\nim.is_pregnant,\nim.last_delivery_date,\nim.immunisation_given,\ncast(im.additional_info as json)->> ''developmentalDelays'' as developmental_delay,\ncast(im.additional_info as json)->> ''lastServiceLongGate'' as last_service_date,\n(select mobile_number from hof_det) as family_phone_no,\nconcat_ws('' '',imf.house_number,imf.address1, imf.address2) as family_address\nfrom imt_member im \ninner join imt_family imf on imf.family_id = im.family_id    \nwhere im.id = #memberId#;\n","response":"$infoData$.memberDetails","isResultArray":null,"successMessage":null,"failureMessage":"Member not found.","isResponseMandatory":true,"isField":null,"isPagination":false}]}',
	'[{"type":"FORM_QUERY","value":"Fetch hiv details"},{"type":"FORM_QUERY","value":"Fetch member details"},{"type":"FORM_VARIABLE_SETTER","value":"ageInYears","continueIfFail":true},{"type":"FORM_VARIABLE_SETTER","value":"dob","continueIfFail":true},{"type":"FORM_VARIABLE_SETTER","value":"minServiceDate","continueIfFail":true},{"type":"FORM_VARIABLE_SETTER","value":"minLmpDate","continueIfFail":true},{"type":"FORM_METHOD","value":"setCounselMsgs","continueIfFail":true}]',
	'[{"queryCode":"update_hiv_details","hasLoop":null,"queryPath":"$formData$.hivDetails","subQueries":[],"params":[{"key":"serptrin","type":"FIELD","valueKey":"serptrin"},{"key":"duration","type":"FIELD","valueKey":"duration"},{"key":"taken_art","type":"FIELD","valueKey":"taken_art"},{"key":"stopped_art","type":"FIELD","valueKey":"stopped_art"},{"key":"arv_taken","type":"FIELD","valueKey":"arv_taken"},{"key":"when_stopped","type":"FIELD","valueKey":"when_stopped"},{"key":"place_received_art","type":"FIELD","valueKey":"place_received_art"},{"key":"other_medication_along","type":"FIELD","valueKey":"other_medication_along"},{"key":"enough_medication","type":"FIELD","valueKey":"enough_medication"},{"key":"viral_load_test","type":"FIELD","valueKey":"viral_load_test"},{"key":"viral_load_suppressed","type":"FIELD","valueKey":"viral_load_suppressed"},{"key":"unprotected_sex","type":"FIELD","valueKey":"unprotected_sex"},{"key":"hiv_status_of_member_known","type":"FIELD","valueKey":"hiv_status_of_member_known"},{"key":"willing_to_share_status","type":"FIELD","valueKey":"willing_to_share_status"},{"key":"name","type":"FIELD","valueKey":"name"},{"key":"phone_number","type":"FIELD","valueKey":"phone_number"},{"key":"address","type":"FIELD","valueKey":"address"},{"key":"lmp_date","type":"FIELD","valueKey":"lmp_date"},{"key":"hiv_id","type":"META_DATA","valueKey":"$stateParams$.id"}],"isEventResource":null,"$$hashKey":"object:30718","queryName":"Update HIV Known details","query":"with update_data as (\n    update rch_hiv_known_master\n    set \n    serptrin = #serptrin#,\n    duration = #duration#,\n    taken_art = #taken_art#,\n    stopped_art = #stopped_art#,\n    arv_taken = #arv_taken#,\n    when_stopped = #when_stopped#,\n    place_received_art = #place_received_art#,\n    other_medication_along = #other_medication_along#,\n    enough_medication = #enough_medication#,\n    viral_load_test = #viral_load_test#,\n    viral_load_suppressed = #viral_load_suppressed#,\n    unprotected_sex = #unprotected_sex#,\n    hiv_status_of_member_known = #hiv_status_of_member_known#,\n    willing_to_share_status = #willing_to_share_status#,\n    name = #name#,\n    phone_number = #phone_number#,\n    address = #address#,\n    lmp_date = #lmp_date#,\n    modified_by = #loggedInUserId#,\n    modified_on = now()\n    where id = #hiv_id#\n    returning rch_hiv_known_master.id\n)\nselect id from update_data;"}]'
FROM insert_into_medplat_form_master;


INSERT INTO medplat_form_version_history
("uuid", form_master_uuid, template_config, field_config, "version", created_by, created_on, modified_by, modified_on, form_object, template_css, form_vm, execution_sequence, query_config)
SELECT
	'fbe2c02b-1481-38bb-690d-b0008213b66f',
	'db103712-3d4d-4400-9bd4-1990970c9533',
	'[{"type":"CARD","config":{"title":"Member Infomation","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unique_health_id","fieldName":"Member ID","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp","fieldName":"LMP","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"family_phone_no","fieldName":"Family Phone No.","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"family_address","fieldName":"Family Address","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":""}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status","fieldName":"HIV Status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"immunisation_given","fieldName":"Immunization status","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]},{"type":"CARD","config":{"title":"Screening Details","size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"isCollapsible":false},"elements":[{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[]}]},{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"service_date","fieldName":"Service Date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"serptrin","fieldName":"Septrin taken ?","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"duration","fieldName":"Septrin duration","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"taken_art","fieldName":"Taking ART","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"other_medication_along","fieldName":"Other medication along with ART","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"enough_medication","fieldName":"Enough medication supply","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"refillMsg","fieldName":"Counsel for medication","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"viral_load_test","fieldName":"Viral load test","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"viralLoadMsg","fieldName":"Viral Load test msg","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"viral_load_suppressed","fieldName":"Viral load suppressed","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"unprotected_sex","fieldName":"Unprotected sex","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"hiv_status_of_member_known","fieldName":"HIV status of member known","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"willing_to_share_status","fieldName":"Share contact details","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]},{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"name","fieldName":"Name","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"address","fieldName":"Address","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"phone_number","fieldName":"Phone Number","fieldType":"NUMBER","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]},{"type":"ROW","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"protectionMsg","fieldName":"Protection Msg","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"lmp_date","fieldName":"LMP date","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"stopped_art","fieldName":"ART stopped because of challenges","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"arvMsg","fieldName":"ARV Msg","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"arv_taken","fieldName":"ARVs treatment past","fieldType":"RADIO","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"6","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"when_stopped","fieldName":"ARV stopped","fieldType":"DATE","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]},{"type":"COL","config":{"size":"12","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null},"elements":[{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"reassureClient","fieldName":"Reassure client","fieldType":"INFORMATION_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null,"labelCssClasses":"alert alert-warning p-1"}},{"type":"TECHO_FORM_FIELD","elements":[],"isAdded":false,"config":{"fieldKey":"place_received_art","fieldName":"ARV Place","fieldType":"SHORT_TEXT","cssStyles":null,"cssClasses":null,"isRepeatable":false,"showAddRemoveButton":false,"ngModel":null,"isConditional":false,"ngIf":null}}]}]}]}]',
	'{"KNOWN_POSITIVE":{"Age":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"age","fieldName":"Age","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Age"},"DOB":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"dob","fieldName":"DOB","fieldType":"INFORMATION_DISPLAY","dateFormat":"dd/MM/yyyy","disability":"null","requirable":"null","visibility":"null","displayType":"date","displayValue":"DOB"},"LMP":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"lmp","fieldName":"LMP","fieldType":"INFORMATION_DISPLAY","dateFormat":"dd/MM/yyyy","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"CUSTOM\",\"operator\":null,\"value1\":null,\"value2\":null,\"fieldName\":null,\"queryCode\":null,\"expression\":\"$infoData$.memberDetails.gender === ''Female''\"}]}}","displayType":"date","displayValue":"LMP"},"Name":{"label":"Name","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Name","fieldKey":"name","isHidden":"false","fieldName":"Name","fieldType":"SHORT_TEXT","maxLength":"100","minLength":"3","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.willing_to_share_status\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Name","requiredMessage":"Enter name"},"Gender":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"gender","fieldName":"Gender","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Gender"},"ARV Msg":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"arvMsg","fieldName":"ARV Msg","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Male''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LT\",\"value1\":\"15\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"GT\",\"value1\":\"80\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}]}}]}}","isClickable":"false"},"Address":{"label":"Address","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Address","fieldKey":"address","isHidden":"false","fieldName":"Address","fieldType":"SHORT_TEXT","maxLength":"100","minLength":"1","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.willing_to_share_status\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Address","requiredMessage":"Enter address"},"LMP date":{"label":"LMP date","events":"null","ngModel":"$formData$.hivDetails","tooltip":"LMP date","fieldKey":"lmp_date","isHidden":"false","fieldName":"LMP date","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"BT\",\"value1\":\"15\",\"value2\":\"80\",\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"LMP date","maxDateField":"{\"key\":\"$formData$.hivDetails.service_date\",\"type\":\"FIELD\"}","minDateField":"{\"key\":\"$utilityData$.minLmpDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Enter date"},"Religion":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"religion","fieldName":"Religion","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Religion"},"ARV Place":{"label":"Where did you receive ARVs (Antiretrovirals) from in the past","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Where did you receive ARVs (Antiretrovirals) from in the past","fieldKey":"place_received_art","isHidden":"false","fieldName":"ARV Place","fieldType":"SHORT_TEXT","maxLength":"50","minLength":"1","disability":"null","hasPattern":"false","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQWithType\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.arv_taken\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Where did you receive ARVs (Antiretrovirals) from in the past","requiredMessage":"Enter place"},"Member ID":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"unique_health_id","fieldName":"Member ID","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member ID"},"HIV Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"hiv_status","fieldName":"HIV Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"HIV Status"},"NRC Number":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"nrc_number","fieldName":"NRC Number","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"NRC Number"},"Taking ART":{"label":"Are you taking ART ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Are you taking ART ?","fieldKey":"taken_art","isHidden":"false","fieldName":"Taking ART","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Are you taking ART ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"ARV stopped":{"label":"When did you stop taking ARVs (Antiretrovirals) ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"When did you stop taking ARVs (Antiretrovirals) ?","fieldKey":"when_stopped","isHidden":"false","fieldName":"ARV stopped","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQWithType\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.arv_taken\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"When did you stop taking ARVs (Antiretrovirals) ?","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.dob\",\"type\":\"VARIABLE\"}","requiredMessage":"Select option"},"Member Name":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"member_name","fieldName":"Member Name","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Member Name"},"Phone Number":{"max":"10","min":"10","label":"Phone Number","events":"null","ngModel":"$formData$.hivDetails","pattern":"^\\d{1,13}$","tooltip":"Phone Number","fieldKey":"phone_number","isHidden":"false","fieldName":"Phone Number","fieldType":"NUMBER","disability":"null","hasPattern":"true","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.willing_to_share_status\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Phone Number","patternMessage":"Enter valid phone number","requiredMessage":"Enter phone no"},"Service Date":{"label":"Service Date","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Service Date","fieldKey":"service_date","isHidden":"false","fieldName":"Service Date","fieldType":"DATE","disability":"null","isDisabled":"true","isRequired":"false","requirable":"null","visibility":"null","placeholder":"Service Date","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.minServiceDate\",\"type\":\"VARIABLE\"}","requiredMessage":"Select date"},"Family Address":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"family_address","fieldName":"Family Address","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Family Address"},"Marital Status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"marital_status","fieldName":"Marital Status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Marital Status"},"Protection Msg":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"protectionMsg","fieldName":"Protection Msg","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.unprotected_sex\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Reassure client":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"reassureClient","fieldName":"Reassure client","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQWithType\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.arv_taken\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Septrin taken ?":{"label":"Have you ever taken septrin before ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you ever taken septrin before ?","fieldKey":"serptrin","isHidden":"false","fieldName":"Septrin taken ?","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"null","optionsType":"staticOptions","placeholder":"Have you ever taken septrin before ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Unprotected sex":{"label":"Had unprotected sex in the last six months ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Had unprotected sex in the last six months ?","fieldKey":"unprotected_sex","isHidden":"false","fieldName":"Unprotected sex","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"BT\",\"value1\":\"15\",\"value2\":\"80\",\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Had unprotected sex in the last six months ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Viral load test":{"label":"Viral load test in the last six months ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you had a viral load test in the last six months ?","fieldKey":"viral_load_test","isHidden":"false","fieldName":"Viral load test","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Have you had a viral load test in the last six months","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Chronic Diseases":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"chronic_disease","fieldName":"Chronic Diseases","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Chronic Diseases"},"Family Phone No.":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"family_phone_no","fieldName":"Family Phone No.","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"null","displayType":"text","displayValue":"Family Phone No."},"Septrin duration":{"label":"Taking septrin since when ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Taking septrin since when ?","fieldKey":"duration","isHidden":"false","fieldName":"Septrin duration","fieldType":"DATE","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.serptrin\",\"queryCode\":null,\"expression\":null}]}}","placeholder":"Taking septrin since when ?","maxDateField":"{\"key\":\"$today$\",\"type\":\"VARIABLE\"}","minDateField":"{\"key\":\"$utilityData$.dob\",\"type\":\"VARIABLE\"}","requiredMessage":"Select date"},"ARVs treatment past":{"label":"Have you taken any ARVs (Antiretrovirals) for treatment in the past ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you taken any ARVs (Antiretrovirals) for treatment in the past ?","fieldKey":"arv_taken","isHidden":"false","fieldName":"ARVs treatment past","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Male''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LT\",\"value1\":\"15\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"GT\",\"value1\":\"80\",\"value2\":null,\"fieldName\":\"$utilityData$.dob\",\"queryCode\":null,\"expression\":null}]}}]}}]}}","optionsType":"staticOptions","placeholder":"Have you taken any ARVs (Antiretrovirals) for treatment in the past ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Immunization status":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"immunisation_given","fieldName":"Immunization status","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LTE\",\"value1\":\"5\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","displayValue":"Immunization status"},"Viral Load test msg":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"viralLoadMsg","fieldName":"Viral Load test msg","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null},{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"false\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.viral_load_test\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Share contact details":{"label":"Willing to share the contact details of the person you have had unprotected sex with?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Willing to share the contact details of the person you have had unprotected sex with?","fieldKey":"willing_to_share_status","isHidden":"false","fieldName":"Share contact details","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.unprotected_sex\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Willing to share the contact details of the person you have had unprotected sex with?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Viral load suppressed":{"label":"Is your Viral Load Suppressed ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Is your Viral Load Suppressed ?","fieldKey":"viral_load_suppressed","isHidden":"false","fieldName":"Viral load suppressed","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Is your Viral Load Suppressed ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Counsel for medication":{"events":"null","ngModel":"$formData$.hivDetails","fieldKey":"refillMsg","fieldName":"Counsel for medication","fieldType":"INFORMATION_TEXT","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null},{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"false\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.enough_medication\",\"queryCode\":null,\"expression\":null}]}}","isClickable":"false"},"Enough medication supply":{"label":"Do you have enough supply of your medication for the next 1 week ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Do you have enough supply of your medication for the next 1 week ?","fieldKey":"enough_medication","isHidden":"false","fieldName":"Enough medication supply","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Do you have enough supply of your medication for the next 1 week ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"HIV status of member known":{"label":"Do you know the HIV status you had unprotected sex with?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Do you know the HIV status you had unprotected sex with?","fieldKey":"hiv_status_of_member_known","isHidden":"false","fieldName":"HIV status of member known","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.unprotected_sex\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Do you know the HIV status you had unprotected sex with?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"Last method of contraception":{"events":"null","ngModel":"$infoData$.memberDetails","fieldKey":"last_method_of_contraception","fieldName":"Last method of contraception","fieldType":"INFORMATION_DISPLAY","disability":"null","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"BT\",\"value1\":\"9\",\"value2\":\"110\",\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}","displayType":"text","displayValue":"Last method of contraception"},"Other medication along with ART":{"label":"Taking any other medication along with ART","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Are you taking any other medication along with ART ?","fieldKey":"other_medication_along","isHidden":"false","fieldName":"Other medication along with ART","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"true\",\"value2\":null,\"fieldName\":\"$formData$.hivDetails.taken_art\",\"queryCode\":null,\"expression\":null}]}}","optionsType":"staticOptions","placeholder":"Are you taking any other medication along with ART","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"},"ART stopped because of challenges":{"label":"Have you been on treatment for ART (Anti-retroviral Therapy) then stopped because of some challenges or side effects of the drugs ?","events":"null","ngModel":"$formData$.hivDetails","tooltip":"Have you been on treatment for ART (Anti-retroviral Therapy) then stopped because of some challenges or side effects of the drugs ?","fieldKey":"stopped_art","isHidden":"false","fieldName":"ART stopped because of challenges","fieldType":"RADIO","isBoolean":"true","disability":"null","isDisabled":"false","isRequired":"true","requirable":"null","visibility":"{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Male''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"AND\",\"options\":[{\"type\":\"FIELD\",\"operator\":\"EQ\",\"value1\":\"''Female''\",\"value2\":null,\"fieldName\":\"$infoData$.memberDetails.gender\",\"queryCode\":null,\"expression\":null},{\"conditions\":{\"rule\":\"OR\",\"options\":[{\"type\":\"VARIABLE\",\"operator\":\"LT\",\"value1\":\"15\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null},{\"type\":\"VARIABLE\",\"operator\":\"GT\",\"value1\":\"80\",\"value2\":null,\"fieldName\":\"$utilityData$.ageInYears\",\"queryCode\":null,\"expression\":null}]}}]}}]}}","optionsType":"staticOptions","placeholder":"Have you been on treatment for ART (Anti-retroviral Therapy) then stopped because of some challenges or side effects of the drugs ?","staticOptions":"[{\"key\":\"true\",\"value\":\"Yes\"},{\"key\":\"false\",\"value\":\"No\"}]","requiredMessage":"Select option"}}}',
	'DRAFT',
	97104,
	now(),
	97104,
	now(),
	'[{"title":"$formData$","isArray":false,"nodes":[{"title":"hivDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:866","path":"$formData$.hivDetails","backendConfigPath":"$formData$.hivDetails"}],"path":"$formData$","backendConfigPath":"$formData$","$$hashKey":"object:844"},{"title":"$infoData$","isArray":false,"nodes":[{"title":"memberDetails","nodes":[],"indexAlias":null,"$$hashKey":"object:878","path":"$infoData$.memberDetails","backendConfigPath":"$infoData$.memberDetails"}],"path":"$infoData$","backendConfigPath":"$infoData$","$$hashKey":"object:845"}]',
	'label {
    white-space: normal !important;
    line-height: 1.75 !important;
}',
	'{"formVariables":[{"value":"ageInYears","type":"NUMBER","bindTo":"$utilityData$","setter":true,"setterMethodName":"setAgeInYears","setterMethodCode":"(function setAgeInYears() {\n\n    let ageParts = $infoData$.memberDetails.age.split('' '');\n    let years = 0;\n    if (ageParts.length < 6) {\n        years = 0\n    }\n    else {\n        years = isNaN(parseInt(ageParts[0])) ? 0 : parseInt(ageParts[0]);\n    }\n    $utilityData$.ageInYears = years;\n\t\n});"},{"value":"dob","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setDob","setterMethodCode":"(function setDob() {\n\n$utilityData$.dob = $infoData$.memberDetails.dob;\n\t\n});"},{"value":"minServiceDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinServiceDate","setterMethodCode":"(function setMinServiceDate() {\n\n    $utilityData$.minServiceDate = $formData$.hivDetails.service_date && moment($formData$.hivDetails.service_date).isAfter(moment().subtract(9, ''months'')) ? moment($formData$.hivDetails.service_date).add(1, ''day'') : moment().subtract(9, ''months'');\n\t\n});"},{"value":"minLmpDate","type":"DATE","bindTo":"$utilityData$","setter":true,"setterMethodName":"setMinLmpDate","setterMethodCode":"(function setMinLmpDate() {\n\n$utilityData$.minLmpDate = moment($infoData$.memberDetails.last_delivery_date).isAfter(moment().subtract(9, ''months'')) ? moment($infoData$.memberDetails.last_delivery_date).add(1, ''day'') : moment().subtract(9, ''months'');\n\t\n});"}],"formMethods":[{"value":"setCounselMsgs","code":"(function setCounselMsgs() {\n    $formData$.hivDetails.refillMsg = ''Counsel client to get a refill of medication before it runs out.'';\n\t$formData$.hivDetails.viralLoadMsg = ''Counsel client to schedule viral load testing.'';\n\t$formData$.hivDetails.protectionMsg = ''Counsel client on important of having protected sex to avoid infecting others and being reinfected.'';\n\t$formData$.hivDetails.arvMsg = ''Counsel the client on the importance of disclosing if they have ever taken ARVs as this will help the clinician manage them accordingly. Furthermore, reassure the client that they will not be penalized nor their health benefits be withdrawn for disclosing.'';\n    $formData$.hivDetails.reassureClient = ''Ask the clients to open up and reassure them that you will go with him or her to the facility and explain to the Nurses if he or she had defaulted.'';\n    \n});"}],"formQueries":[{"value":"Fetch hiv details","queryCode":"fetch_hiv_details","params":"tableId","paramConfig":"{\"tableId\":\"$stateParams$.id\"}","query":"select \nrhkm.id,\nrhkm.member_id,\n--rhkm.service_date,\nrhkm.serptrin,\nrhkm.duration,\nrhkm.taken_art,\nrhkm.stopped_art,\nrhkm.arv_taken,\nrhkm.when_stopped,\nrhkm.place_received_art,\nrhkm.other_medication_along,\nrhkm.enough_medication,\nrhkm.viral_load_test,\nrhkm.viral_load_suppressed,\nrhkm.unprotected_sex,\nrhkm.hiv_status_of_member_known,\nrhkm.willing_to_share_status,\nrhkm.name,\nrhkm.phone_number,\nrhkm.address,\nrhkm.lmp_date\nfrom rch_hiv_known_master rhkm \nwhere id = #tableId#\norder by id desc limit 1;","response":"$formData$.hivDetails","isResultArray":false,"successMessage":null,"failureMessage":"Screening details not found.","isResponseMandatory":true,"isField":false,"isPagination":false,"toVariable":false},{"value":"Fetch member details","queryCode":"fetch_mem_details","params":"memberId","paramConfig":"{\"memberId\":\"$formData$.hivDetails.member_id\"}","query":"with hof_det as (\nselect im.mobile_number \nfrom imt_member im\nwhere im.family_id = (select family_id from imt_member where id = #memberId#)\nand im.family_head\n)\nselect im.unique_health_id,\nconcat_ws('' '',im.first_name,im.middle_name,im.last_name) as member_name,\ncast(age(im.dob) as text) as age,\nim.dob,\ncase when im.gender = ''F'' then ''Female'' else ''Male'' end as gender,\t\nim.nrc_number,\n(select value from listvalue_field_value_detail where id = im.marital_status) as marital_status,\n(select value from listvalue_field_value_detail where cast(id as text) = imf.religion) as religion,\ncase when im.last_method_of_contraception = ''NATURAL_METHODS'' then ''Natural methods''\nwhen im.last_method_of_contraception = ''ORALPILLS'' or im.last_method_of_contraception = ''ORAL_PILLS'' then ''Oral pills''\nwhen im.last_method_of_contraception = ''IUCD5'' then ''IUCD 5 years''\nwhen im.last_method_of_contraception = ''IUCD10'' then ''IUCD 10 years''\nwhen im.last_method_of_contraception = ''STERILIZATION'' then ''Sterilization''\nwhen im.last_method_of_contraception = ''CONDOM'' then ''Condom''\nwhen im.last_method_of_contraception = ''MLSTR'' then ''Male sterilization''\nwhen im.last_method_of_contraception = ''CONTRA'' then ''Emergency Contraceptive Pills''\nwhen im.last_method_of_contraception = ''INJECTABLES'' then ''Injectables''\nwhen im.last_method_of_contraception = ''BARRIER_METHOD'' then ''Barrier Method''\nwhen im.last_method_of_contraception = ''CHHAYA'' then ''Chhaya''\nwhen im.last_method_of_contraception = ''ANTARA'' then ''Antara''\nelse im.last_method_of_contraception end as last_method_of_contraception,\nim.lmp,\ncast(im.additional_info as json)->> ''hivTest'' as hiv_status,\nim.chronic_disease,\nim.birth_cert_number,\nim.mother_name,\nim.birth_weight,\nim.weight,\nim.is_pregnant,\nim.last_delivery_date,\nim.immunisation_given,\ncast(im.additional_info as json)->> ''developmentalDelays'' as developmental_delay,\ncast(im.additional_info as json)->> ''lastServiceLongGate'' as last_service_date,\n(select mobile_number from hof_det) as family_phone_no,\nconcat_ws('' '',imf.house_number,imf.address1, imf.address2) as family_address\nfrom imt_member im \ninner join imt_family imf on imf.family_id = im.family_id    \nwhere im.id = #memberId#;\n","response":"$infoData$.memberDetails","isResultArray":null,"successMessage":null,"failureMessage":"Member not found.","isResponseMandatory":true,"isField":null,"isPagination":false}]}',
	'[{"type":"FORM_QUERY","value":"Fetch hiv details"},{"type":"FORM_QUERY","value":"Fetch member details"},{"type":"FORM_VARIABLE_SETTER","value":"ageInYears","continueIfFail":true},{"type":"FORM_VARIABLE_SETTER","value":"dob","continueIfFail":true},{"type":"FORM_VARIABLE_SETTER","value":"minServiceDate","continueIfFail":true},{"type":"FORM_VARIABLE_SETTER","value":"minLmpDate","continueIfFail":true},{"type":"FORM_METHOD","value":"setCounselMsgs","continueIfFail":true}]',
	'[{"queryCode":"update_hiv_details","hasLoop":null,"queryPath":"$formData$.hivDetails","subQueries":[],"params":[{"key":"serptrin","type":"FIELD","valueKey":"serptrin"},{"key":"duration","type":"FIELD","valueKey":"duration"},{"key":"taken_art","type":"FIELD","valueKey":"taken_art"},{"key":"stopped_art","type":"FIELD","valueKey":"stopped_art"},{"key":"arv_taken","type":"FIELD","valueKey":"arv_taken"},{"key":"when_stopped","type":"FIELD","valueKey":"when_stopped"},{"key":"place_received_art","type":"FIELD","valueKey":"place_received_art"},{"key":"other_medication_along","type":"FIELD","valueKey":"other_medication_along"},{"key":"enough_medication","type":"FIELD","valueKey":"enough_medication"},{"key":"viral_load_test","type":"FIELD","valueKey":"viral_load_test"},{"key":"viral_load_suppressed","type":"FIELD","valueKey":"viral_load_suppressed"},{"key":"unprotected_sex","type":"FIELD","valueKey":"unprotected_sex"},{"key":"hiv_status_of_member_known","type":"FIELD","valueKey":"hiv_status_of_member_known"},{"key":"willing_to_share_status","type":"FIELD","valueKey":"willing_to_share_status"},{"key":"name","type":"FIELD","valueKey":"name"},{"key":"phone_number","type":"FIELD","valueKey":"phone_number"},{"key":"address","type":"FIELD","valueKey":"address"},{"key":"lmp_date","type":"FIELD","valueKey":"lmp_date"},{"key":"hiv_id","type":"META_DATA","valueKey":"$stateParams$.id"}],"isEventResource":null,"$$hashKey":"object:30718","queryName":"Update HIV Known details","query":"with update_data as (\n    update rch_hiv_known_master\n    set \n    serptrin = #serptrin#,\n    duration = #duration#,\n    taken_art = #taken_art#,\n    stopped_art = #stopped_art#,\n    arv_taken = #arv_taken#,\n    when_stopped = #when_stopped#,\n    place_received_art = #place_received_art#,\n    other_medication_along = #other_medication_along#,\n    enough_medication = #enough_medication#,\n    viral_load_test = #viral_load_test#,\n    viral_load_suppressed = #viral_load_suppressed#,\n    unprotected_sex = #unprotected_sex#,\n    hiv_status_of_member_known = #hiv_status_of_member_known#,\n    willing_to_share_status = #willing_to_share_status#,\n    name = #name#,\n    phone_number = #phone_number#,\n    address = #address#,\n    lmp_date = #lmp_date#,\n    modified_by = #loggedInUserId#,\n    modified_on = now()\n    where id = #hiv_id#\n    returning rch_hiv_known_master.id\n)\nselect id from update_data;"}]'
ON CONFLICT (form_master_uuid, "version")
DO UPDATE
SET
	form_master_uuid=EXCLUDED.form_master_uuid,
	template_config=EXCLUDED.template_config,
	field_config=EXCLUDED.field_config,
	"version"=EXCLUDED."version",
	created_by=EXCLUDED.created_by,
	created_on=EXCLUDED.created_on,
	modified_by=EXCLUDED.modified_by,
	modified_on=EXCLUDED.modified_on,
	form_object=EXCLUDED.form_object,
	template_css=EXCLUDED.template_css,
	form_vm=EXCLUDED.form_vm,
	execution_sequence=EXCLUDED.execution_sequence,
	query_config=EXCLUDED.query_config;
